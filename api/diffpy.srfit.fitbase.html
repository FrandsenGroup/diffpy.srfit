<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>diffpy.srfit.fitbase package &#8212; diffpy.srfit 3.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="diffpy.srfit.interface package" href="diffpy.srfit.interface.html" />
    <link rel="prev" title="diffpy.srfit.equation.visitors package" href="diffpy.srfit.equation.visitors.html" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" type="image/png" href="../_static/favicon.png" />
    <meta name="viewport" content="width=device-width,initial-scale=0.8">
    
    

  </head><body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="responsive-menu"><a href="#sidebar-anchor" title="Navigation">&#9776;</a></li>
        <li><a href="../index.html">diffpy.srfit 3.0.0 documentation</a> &#187;</li>
          <li><a href="diffpy.srfit.html" accesskey="U">diffpy.srfit package</a> &#187;</li> 
      </ul>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="diffpy-srfit-fitbase-package">
<h1>diffpy.srfit.fitbase package<a class="headerlink" href="#diffpy-srfit-fitbase-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-diffpy.srfit.fitbase.calculator">
<span id="diffpy-srfit-fitbase-calculator-module"></span><h2>diffpy.srfit.fitbase.calculator module<a class="headerlink" href="#module-diffpy.srfit.fitbase.calculator" title="Permalink to this headline">¶</a></h2>
<p>The Calculator for Parameter-aware functions.</p>
<p>Calculator is a functor class for producing a signal from embedded Parameters.
Calculators can store Parameters and ParameterSets, Constraints and Restraints.
Also, the __call__ function can be overloaded to accept external arguments.
Calculators are used to wrap registered functions so that the function’s
Parameters are contained in an object specific to the function.  A custom
Calculator can be added to another RecipeOrganizer with the
‘registerCalculator’ method.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.calculator.Calculator">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.calculator.</code><code class="descname">Calculator</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.calculator.Calculator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.equation.literals.html#diffpy.srfit.equation.literals.operators.Operator" title="diffpy.srfit.equation.literals.operators.Operator"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.equation.literals.operators.Operator</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.parameterset.ParameterSet" title="diffpy.srfit.fitbase.parameterset.ParameterSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.parameterset.ParameterSet</span></code></a></p>
<p>Base class for calculators.</p>
<p>A Calculator organizes Parameters and has a __call__ method that can
calculate a generic signal.</p>
<p>Attributes
name            –  A name for this organizer.
meta            –  A dictionary of metadata needed by the calculator.
_calculators    –  A managed dictionary of Calculators, indexed by name.
_constraints    –  A set of constrained Parameters. Constraints can be</p>
<blockquote>
<div>added using the ‘constrain’ methods.</div></blockquote>
<p>_parameters     –  A managed OrderedDict of contained Parameters.
_parsets        –  A managed dictionary of ParameterSets.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ or ‘confine’ methods.</div></blockquote>
<dl class="docutils">
<dt>_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</dt>
<dd>instance that is used create Equations from string.</dd>
</dl>
<p>Operator Attributes
args    –  List of Literal arguments
nin     –  Number of inputs (&lt;1 means this is variable)
nout    –  Number of outputs (1)
operation   –  Function that performs the operation, self.__call__
symbol  –  Same as name
_value  –  The value of the Operator.
value   –  Property for ‘getValue’.</p>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<dl class="attribute">
<dt id="diffpy.srfit.fitbase.calculator.Calculator.nin">
<code class="descname">nin</code><em class="property"> = -1</em><a class="headerlink" href="#diffpy.srfit.fitbase.calculator.Calculator.nin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.calculator.Calculator.nout">
<code class="descname">nout</code><em class="property"> = 1</em><a class="headerlink" href="#diffpy.srfit.fitbase.calculator.Calculator.nout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.calculator.Calculator.operation">
<code class="descname">operation</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.calculator.Calculator.operation" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator indicating abstract properties.</p>
<p>Requires that the metaclass is ABCMeta or derived from it.  A
class that has a metaclass derived from ABCMeta cannot be
instantiated unless all of its abstract properties are overridden.
The abstract properties can be called using any of the normal
‘super’ call mechanisms.</p>
<p>Usage:</p>
<blockquote>
<div><dl class="docutils">
<dt>class C:</dt>
<dd><p class="first">__metaclass__ = ABCMeta
&#64;abstractproperty
def my_abstract_property(self):</p>
<blockquote class="last">
<div>…</div></blockquote>
</dd>
</dl>
</div></blockquote>
<p>This defines a read-only property; you can also define a read-write
abstract property using the ‘long’ form of property declaration:</p>
<blockquote>
<div><dl class="docutils">
<dt>class C:</dt>
<dd>__metaclass__ = ABCMeta
def getx(self): …
def setx(self, value): …
x = abstractproperty(getx, setx)</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.calculator.Calculator.symbol">
<code class="descname">symbol</code><a class="headerlink" href="#diffpy.srfit.fitbase.calculator.Calculator.symbol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.configurable">
<span id="diffpy-srfit-fitbase-configurable-module"></span><h2>diffpy.srfit.fitbase.configurable module<a class="headerlink" href="#module-diffpy.srfit.fitbase.configurable" title="Permalink to this headline">¶</a></h2>
<p>Configurable class.</p>
<p>A Configurable has state of which a FitRecipe must be aware.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.configurable.Configurable">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.configurable.</code><code class="descname">Configurable</code><a class="headerlink" href="#diffpy.srfit.fitbase.configurable.Configurable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Configurable class.</p>
<p>A Configurable has state of which a FitRecipe must be aware.</p>
<p>Attributes
_configobjs     –  Set of Configureables in a hierarcy or instances.</p>
<blockquote>
<div>Messasges get passed up the hierarcy to a FitReciple
via these objects.</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.constraint">
<span id="diffpy-srfit-fitbase-constraint-module"></span><h2>diffpy.srfit.fitbase.constraint module<a class="headerlink" href="#module-diffpy.srfit.fitbase.constraint" title="Permalink to this headline">¶</a></h2>
<p>Constraint class.</p>
<p>Constraints are used by a FitRecipe (and other RecipeOrganizers) to organize
constraint equations. They store a Parameter object and an Equation object that
is used to compute its value. The Constraint.constrain method is used to create
this association.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.constraint.Constraint">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.constraint.</code><code class="descname">Constraint</code><a class="headerlink" href="#diffpy.srfit.fitbase.constraint.Constraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.fitbase.validatable.Validatable" title="diffpy.srfit.fitbase.validatable.Validatable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.validatable.Validatable</span></code></a></p>
<p>Constraint class.</p>
<p>Constraints are designed to be stored in only one place. (The holder of the
constraint owns it).</p>
<p>Attributes
par     –  A Parameter that is the subject of the constraint.
eq      –  An equation whose evaluation is used to set the value of the</p>
<blockquote>
<div>constraint.</div></blockquote>
<dl class="method">
<dt id="diffpy.srfit.fitbase.constraint.Constraint.constrain">
<code class="descname">constrain</code><span class="sig-paren">(</span><em>par</em>, <em>eq</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.constraint.Constraint.constrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Constrain a Parameter according to an Equation.</p>
<p>The parameter will be set constant once it is constrained. This will
keep it from being constrained multiple times.</p>
<p>Raises a ValueError if par is const.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.constraint.Constraint.unconstrain">
<code class="descname">unconstrain</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.constraint.Constraint.unconstrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the constraint.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.constraint.Constraint.update">
<code class="descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.constraint.Constraint.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the parameter according to the equation.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.fitcontribution">
<span id="diffpy-srfit-fitbase-fitcontribution-module"></span><h2>diffpy.srfit.fitbase.fitcontribution module<a class="headerlink" href="#module-diffpy.srfit.fitbase.fitcontribution" title="Permalink to this headline">¶</a></h2>
<p>FitContribution class.</p>
<p>FitContributions generate a residual function for a FitRecipe. A
FitContribution associates an Equation for generating a signal, optionally one
or more ProfileGenerators or Calculators that help in this, and a Profile that
holds the observed and calculated signals.</p>
<p>See the examples in the documention for how to use a FitContribution.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.fitcontribution.FitContribution">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.fitcontribution.</code><code class="descname">FitContribution</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitcontribution.FitContribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.fitbase.parameterset.ParameterSet" title="diffpy.srfit.fitbase.parameterset.ParameterSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.parameterset.ParameterSet</span></code></a></p>
<p>FitContribution class.</p>
<p>FitContributions organize an Equation that calculates the signal, and a
Profile that holds the signal. ProfileGenerators and Calculators can be
used as well.  Contraints and Restraints can be created as part of a
FitContribution.</p>
<p>Attributes
name            –  A name for this FitContribution.
profile         –  A Profile that holds the measured (and calculated)</p>
<blockquote>
<div>signal.</div></blockquote>
<p>_calculators    –  A managed dictionary of Calculators, indexed by name.
_constraints    –  A set of constrained Parameters. Constraints can be</p>
<blockquote>
<div>added using the ‘constrain’ methods.</div></blockquote>
<p>_generators     –  A managed dictionary of ProfileGenerators.
_parameters     –  A managed OrderedDict of parameters.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ method.</div></blockquote>
<p>_parsets        –  A managed dictionary of ParameterSets.
_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</p>
<blockquote>
<div>instance that is used to create constraints and
restraints from string</div></blockquote>
<p>_eq             –  The FitContribution equation that will be optimized.
_reseq          –  The residual equation.
_xname          –  Name of the x-variable
_yname          –  Name of the y-variable
_dyname         –  Name of the dy-variable</p>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.fitcontribution.FitContribution.addProfileGenerator">
<code class="descname">addProfileGenerator</code><span class="sig-paren">(</span><em>gen</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitcontribution.FitContribution.addProfileGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a ProfileGenerator to be used by this FitContribution.</p>
<p>The ProfileGenerator is given a name so that it can be used as part of
the profile equation (see setEquation). This can be different from the
name of the ProfileGenerator used for attribute access.
FitContributions should not share ProfileGenerator instances. Different
ProfileGenerators can share Parameters and ParameterSets, however.</p>
<p>Calling addProfileGenerator sets the profile equation to call the
calculator and if there is not a profile equation already.</p>
<p>gen     –  A ProfileGenerator instance
name    –  A name for the calculator. If name is None (default), then</p>
<blockquote>
<div>the ProfileGenerator’s name attribute will be used.</div></blockquote>
<p>Raises ValueError if the ProfileGenerator has no name.
Raises ValueError if the ProfileGenerator has the same name as some
other managed object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitcontribution.FitContribution.evaluate">
<code class="descname">evaluate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitcontribution.FitContribution.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the contribution equation and update profile.ycalc.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitcontribution.FitContribution.getEquation">
<code class="descname">getEquation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitcontribution.FitContribution.getEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get math expression string for the active profile equation.</p>
<p>Return normalized math expression or an empty string if profile
equation has not been set yet.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitcontribution.FitContribution.getResidualEquation">
<code class="descname">getResidualEquation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitcontribution.FitContribution.getResidualEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get math expression string for the active residual equation.</p>
<p>Return normalized math formula or an empty string if residual
equation has not been configured yet.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitcontribution.FitContribution.residual">
<code class="descname">residual</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitcontribution.FitContribution.residual" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the residual for this fitcontribution.</p>
<p>When this method is called, it is assumed that all parameters have been
assigned their most current values by the FitRecipe. This will be the
case when being called as part of a FitRecipe refinement.</p>
<p>The residual is by default an array chiv:
chiv = (eq() - self.profile.y) / self.profile.dy
The value that is optimized is dot(chiv, chiv).</p>
<p>The residual equation can be changed with the setResidualEquation
method.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitcontribution.FitContribution.setEquation">
<code class="descname">setEquation</code><span class="sig-paren">(</span><em>eqstr</em>, <em>ns={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitcontribution.FitContribution.setEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the profile equation for the FitContribution.</p>
<p>This sets the equation that will be used when generating the residual
for this FitContribution.  The equation will be usable within
setResidualEquation as “eq”, and it takes no arguments.</p>
<dl class="docutils">
<dt>eqstr   –  A string representation of the equation. Any Parameter</dt>
<dd>registered by addParameter or setProfile, or function
registered by setCalculator, registerFunction or
registerStringFunction can be can be used in the equation
by name. Other names will be turned into Parameters of this
FitContribution.</dd>
<dt>ns      –  A dictionary of Parameters, indexed by name, that are used</dt>
<dd>in the eqstr, but not registered (default {}).</dd>
</dl>
<p>Raises ValueError if ns uses a name that is already used for a
variable.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitcontribution.FitContribution.setProfile">
<code class="descname">setProfile</code><span class="sig-paren">(</span><em>profile</em>, <em>xname=None</em>, <em>yname=None</em>, <em>dyname=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitcontribution.FitContribution.setProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the Profile for this FitContribution.</p>
<dl class="docutils">
<dt>profile –  A Profile that specifies the calculation points and that</dt>
<dd>will store the calculated signal.</dd>
<dt>xname   –  The name of the independent variable from the Profile. If</dt>
<dd>this is None (default), then the name specified by the
Profile for this parameter will be used.  This variable is
usable within string equations with the specified name.</dd>
<dt>yname   –  The name of the observed Profile.  If this is None</dt>
<dd>(default), then the name specified by the Profile for this
parameter will be used.  This variable is usable within
string equations with the specified name.</dd>
<dt>dyname  –  The name of the uncertainty in the observed Profile. If</dt>
<dd>this is None (default), then the name specified by the
Profile for this parameter will be used.  This variable is
usable within string equations with the specified name.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitcontribution.FitContribution.setResidualEquation">
<code class="descname">setResidualEquation</code><span class="sig-paren">(</span><em>eqstr</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitcontribution.FitContribution.setResidualEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the residual equation for the FitContribution.</p>
<dl class="docutils">
<dt>eqstr   –  A string representation of the residual. If eqstr is None</dt>
<dd>(default), then the previous residual equation will be
used, or the chi2 residual will be used if that does not
exist.</dd>
</dl>
<p>Two residuals are preset for convenience, “chiv” and “resv”.
chiv is defined such that dot(chiv, chiv) = chi^2.
resv is defined such that dot(resv, resv) = Rw^2.
You can call on these in your residual equation. Note that the quantity
that will be optimized is the summed square of the residual equation.
Keep that in mind when defining a new residual or using the built-in
ones.</p>
<p>Raises SrFitError if the Profile is not yet defined.
Raises ValueError if eqstr depends on a Parameter that is not part of
the FitContribution.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.fithook">
<span id="diffpy-srfit-fitbase-fithook-module"></span><h2>diffpy.srfit.fitbase.fithook module<a class="headerlink" href="#module-diffpy.srfit.fitbase.fithook" title="Permalink to this headline">¶</a></h2>
<p>The FitHook class for inspecting the progress of a FitRecipe refinement.</p>
<p>FitHooks are called by a FitRecipe during various times of the residual is
evaluation. The default FitHook simply counts the number of times the residual
is called, and reports that number every time the residual is calculated.
Depending on the verbosity, it will also report the residual and the current
variable values.</p>
<p>Custom FitHooks can be added to a FitRecipe with the FitRecipe.setFitHook
method.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.fithook.FitHook">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.fithook.</code><code class="descname">FitHook</code><a class="headerlink" href="#diffpy.srfit.fitbase.fithook.FitHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for inspecting the progress of a FitRecipe refinement.</p>
<p>Can serve as a fithook for the FitRecipe class (see FitRecipe.pushFitHook
method.) The methods in this class are called during the preparation of the
FitRecipe for refinement, and during the residual call. See the class
methods for a description of their purpose.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.fithook.FitHook.postcall">
<code class="descname">postcall</code><span class="sig-paren">(</span><em>recipe</em>, <em>chiv</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fithook.FitHook.postcall" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called within FitRecipe.residual, after the calculation.</p>
<p>recipe  –  The FitRecipe instance
chiv    –  The residual vector</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fithook.FitHook.precall">
<code class="descname">precall</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fithook.FitHook.precall" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called within FitRecipe.residual, before the calculation.</p>
<p>recipe  –  The FitRecipe instance</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fithook.FitHook.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fithook.FitHook.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the hook data.</p>
<p>This is called whenever FitRecipe._prepare is called, which is whenever
a configurational change to the fit hierarchy takes place, such as
adding a new ParameterSet, constraint or restraint.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.fitrecipe">
<span id="diffpy-srfit-fitbase-fitrecipe-module"></span><h2>diffpy.srfit.fitbase.fitrecipe module<a class="headerlink" href="#module-diffpy.srfit.fitbase.fitrecipe" title="Permalink to this headline">¶</a></h2>
<p>FitRecipe class.</p>
<p>FitRecipes organize FitContributions, variables, Restraints and Constraints to
create a recipe of the system you wish to optimize. From the client’s
perspective, the FitRecipe is a residual calculator. The residual method does
the work of updating variable values, which get propagated to the Parameters of
the underlying FitContributions via the variables and Constraints.  This class
needs no special knowledge of the type of FitContribution or data being used.
Thus, it is suitable for combining residual equations from various types of
refinements into a single residual.</p>
<p>Variables added to a FitRecipe can be tagged with string identifiers. Variables
can be later retrieved or manipulated by tag. The tag name “__fixed” is
reserved.</p>
<p>See the examples in the documentation for how to create an optimization problem
using FitRecipe.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.fitrecipe.</code><code class="descname">FitRecipe</code><span class="sig-paren">(</span><em>name='fit'</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.interface.html#diffpy.srfit.interface.interface.FitRecipeInterface" title="diffpy.srfit.interface.interface.FitRecipeInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.interface.interface.FitRecipeInterface</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer" title="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer</span></code></a></p>
<p>FitRecipe class.</p>
<p>Attributes
name            –  A name for this FitRecipe.
fithooks        –  List of FitHook instances that can pass information out</p>
<blockquote>
<div>of the system during a refinement. By default, the is
populated by a PrintFitHook instance.</div></blockquote>
<dl class="docutils">
<dt>_constraints    –  A dictionary of Constraints, indexed by the constrained</dt>
<dd>Parameter. Constraints can be added using the
‘constrain’ method.</dd>
<dt>_oconstraints   –  An ordered list of the constraints from this and all</dt>
<dd>sub-components.</dd>
</dl>
<p>_calculators    –  A managed dictionary of Calculators.
_contributions  –  A managed OrderedDict of FitContributions.
_parameters     –  A managed OrderedDict of parameters (in this case the</p>
<blockquote>
<div>parameters are varied).</div></blockquote>
<p>_parsets        –  A managed dictionary of ParameterSets.
_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</p>
<blockquote>
<div>instance that is used to create constraints and
restraints from string</div></blockquote>
<p>_restraintlist  –  A list of restraints from this and all sub-components.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ or ‘confine’ methods.</div></blockquote>
<dl class="docutils">
<dt>_ready          –  A flag indicating if all attributes are ready for the</dt>
<dd>calculation.</dd>
</dl>
<p>_tagmanager     –  A TagManager instance for managing tags on Parameters.
_weights        –  List of weighing factors for each FitContribution. The</p>
<blockquote>
<div>weights are multiplied by the residual of the
FitContribution when determining the overall residual.</div></blockquote>
<dl class="docutils">
<dt>_fixedtag       –  “__fixed”, used for tagging variables as fixed. Don’t</dt>
<dd>use this tag unless you want issues.</dd>
</dl>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.
fixednames      –  Names of the fixed refinable variables (read only).
fixedvalues     –  Values of the fixed refinable variables (read only).
bounds          –  Bounds on parameters (read only). See getBounds.
bounds2         –  Bounds on parameters (read only). See getBounds2.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.addContribution">
<code class="descname">addContribution</code><span class="sig-paren">(</span><em>con</em>, <em>weight=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.addContribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a FitContribution to the FitRecipe.</p>
<p>con     –  The FitContribution to be stored.</p>
<p>Raises ValueError if the FitContribution has no name
Raises ValueError if the FitContribution has the same name as some
other managed object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.addParameterSet">
<code class="descname">addParameterSet</code><span class="sig-paren">(</span><em>parset</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.addParameterSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a ParameterSet to the hierarchy.</p>
<p>parset  –  The ParameterSet to be stored.</p>
<p>Raises ValueError if the ParameterSet has no name.
Raises ValueError if the ParameterSet has the same name as some other
managed object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.addVar">
<code class="descname">addVar</code><span class="sig-paren">(</span><em>par</em>, <em>value=None</em>, <em>name=None</em>, <em>fixed=False</em>, <em>tag=None</em>, <em>tags=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.addVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a variable to be refined.</p>
<p>par     –  A Parameter that will be varied during a fit.
value   –  An initial value for the variable. If this is None</p>
<blockquote>
<div>(default), then the current value of par will be used.</div></blockquote>
<dl class="docutils">
<dt>name    –  A name for this variable. If name is None (default), then</dt>
<dd>the name of the parameter will be used.</dd>
</dl>
<p>fixed   –  Fix the variable so that it does not vary (default False).
tag     –  A tag for the variable. This can be used to retrieve, fix</p>
<blockquote>
<div>or free variables by tag (default None). Note that a
variable is automatically tagged with its name and “all”.</div></blockquote>
<dl class="docutils">
<dt>tags    –  A list of tags (default []). Both tag and tags can be</dt>
<dd>applied.</dd>
</dl>
<p>Returns the ParameterProxy (variable) for the passed Parameter.</p>
<p>Raises ValueError if the name of the variable is already taken by
another managed object.
Raises ValueError if par is constant.
Raises ValueError if par is constrained.</p>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.bounds">
<code class="descname">bounds</code><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.bounds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.bounds2">
<code class="descname">bounds2</code><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.bounds2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.boundsToRestraints">
<code class="descname">boundsToRestraints</code><span class="sig-paren">(</span><em>sig=1</em>, <em>scaled=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.boundsToRestraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn all bounded parameters into restraints.</p>
<p>The bounds become limits on the restraint.</p>
<dl class="docutils">
<dt>sig     –  The uncertainty on the bounds (scalar or iterable,</dt>
<dd>default 1).</dd>
</dl>
<p>scaled  –  Scale the restraints, see restrain.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.clearFitHooks">
<code class="descname">clearFitHooks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.clearFitHooks" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the FitHook sequence.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.constrain">
<code class="descname">constrain</code><span class="sig-paren">(</span><em>par</em>, <em>con</em>, <em>ns={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.constrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Constrain a parameter to an equation.</p>
<p>Note that only one constraint can exist on a Parameter at a time.</p>
<p>This is overloaded to set the value of con if it represents a variable
and its current value is None. A constrained variable will be set as
fixed.</p>
<p>par     –  The Parameter to constrain.
con     –  A string representation of the constraint equation or a</p>
<blockquote>
<div>Parameter to constrain to.  A constraint equation must
consist of numpy operators and “known” Parameters.
Parameters are known if they are in the ns argument, or if
they are managed by this object.</div></blockquote>
<dl class="docutils">
<dt>ns      –  A dictionary of Parameters, indexed by name, that are used</dt>
<dd>in the eqstr, but not part of this object (default {}).</dd>
</dl>
<p>Raises ValueError if ns uses a name that is already used for a
variable.
Raises ValueError if eqstr depends on a Parameter that is not part of
the FitRecipe and that is not defined in ns.
Raises ValueError if par is marked as constant.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.delVar">
<code class="descname">delVar</code><span class="sig-paren">(</span><em>var</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.delVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a variable.</p>
<p>Note that constraints and restraints involving the variable are not
modified.</p>
<p>var     –  A variable of the FitRecipe.</p>
<p>Raises ValueError if var is not part of the FitRecipe.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.fix">
<code class="descname">fix</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.fix" title="Permalink to this definition">¶</a></dt>
<dd><p>Fix a parameter by reference, name or tag.</p>
<p>A fixed variable is not refined.  Variables are free by default.</p>
<p>This method accepts string or variable arguments. An argument of “all”
selects all variables. Keyword arguments must be parameter names,
followed by a value to assign to the fixed variable.</p>
<p>Raises ValueError if an unknown Parameter, name or tag is passed, or if
a tag is passed in a keyword.</p>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.fixednames">
<code class="descname">fixednames</code><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.fixednames" title="Permalink to this definition">¶</a></dt>
<dd><p>names of the fixed refinable variables</p>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.fixedvalues">
<code class="descname">fixedvalues</code><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.fixedvalues" title="Permalink to this definition">¶</a></dt>
<dd><p>values of the fixed refinable variables</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.free">
<code class="descname">free</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.free" title="Permalink to this definition">¶</a></dt>
<dd><p>Free a parameter by reference, name or tag.</p>
<p>A free variable is refined.  Variables are free by default. Constrained
variables are not free.</p>
<p>This method accepts string or variable arguments. An argument of “all”
selects all variables. Keyword arguments must be parameter names,
followed by a value to assign to the fixed variable.</p>
<p>Raises ValueError if an unknown Parameter, name or tag is passed, or if
a tag is passed in a keyword.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.getBounds">
<code class="descname">getBounds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.getBounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the bounds on variables in a list.</p>
<p>Returns a list of (lb, ub) pairs, where lb is the lower bound and ub is
the upper bound.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.getBounds2">
<code class="descname">getBounds2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.getBounds2" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the bounds on variables in two lists.</p>
<p>Returns lower- and upper-bound lists of variable bounds.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.getFitHooks">
<code class="descname">getFitHooks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.getFitHooks" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the sequence of FitHook instances.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.getNames">
<code class="descname">getNames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.getNames" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the names of the variables in a list.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.getValues">
<code class="descname">getValues</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.getValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current values of the variables in a list.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.isFree">
<code class="descname">isFree</code><span class="sig-paren">(</span><em>var</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.isFree" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a variable is fixed.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.newVar">
<code class="descname">newVar</code><span class="sig-paren">(</span><em>name</em>, <em>value=None</em>, <em>fixed=False</em>, <em>tag=None</em>, <em>tags=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.newVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new variable of the fit.</p>
<p>This method lets new variables be created that are not tied to a
Parameter.  Orphan variables may cause a fit to fail, depending on the
optimization routine, and therefore should only be created to be used
in contraint or restraint equations.</p>
<dl class="docutils">
<dt>name    –  The name of the variable. The variable will be able to be</dt>
<dd>used by this name in restraint and constraint equations.</dd>
<dt>value   –  An initial value for the variable. If this is None</dt>
<dd>(default), then the variable will be given the value of the
first non-None-valued Parameter constrained to it. If this
fails, an error will be thrown when ‘residual’ is called.</dd>
<dt>fixed   –  Fix the variable so that it does not vary (default False).</dt>
<dd>The variable will still be managed by the FitRecipe.</dd>
<dt>tag     –  A tag for the variable. This can be used to fix and free</dt>
<dd>variables by tag (default None). Note that a variable is
automatically tagged with its name and “all”.</dd>
<dt>tags    –  A list of tags (default []). Both tag and tags can be</dt>
<dd>applied.</dd>
</dl>
<p>Returns the new variable (Parameter instance).</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.popFitHook">
<code class="descname">popFitHook</code><span class="sig-paren">(</span><em>fithook=None</em>, <em>index=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.popFitHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a FitHook by index or reference.</p>
<dl class="docutils">
<dt>fithook –  FitHook instance to remove from the sequence. If this is</dt>
<dd>None (default), default to index.</dd>
</dl>
<p>index   –  Index of FitHook instance to remove (default -1).</p>
<p>Raises ValueError if fithook is not None, but is not present in the
sequence.
Raises IndexError if the sequence is empty or index is out of range.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.pushFitHook">
<code class="descname">pushFitHook</code><span class="sig-paren">(</span><em>fithook</em>, <em>index=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.pushFitHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a FitHook to be called within the residual method.</p>
<p>The hook is an object for reporting updates, or more fundamentally,
passing information out of the system during a refinement. See the
diffpy.srfit.fitbase.fithook.FitHook class for the required interface.
Added FitHooks will be called sequentially during refinement.</p>
<p>fithook –  FitHook instance to add to the sequence
index   –  Index for inserting fithook into the list of fit hooks.  If</p>
<blockquote>
<div>this is None (default), the fithook is added to the end.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.removeParameterSet">
<code class="descname">removeParameterSet</code><span class="sig-paren">(</span><em>parset</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.removeParameterSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a ParameterSet from the hierarchy.</p>
<p>Raises ValueError if parset is not managed by this object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.residual">
<code class="descname">residual</code><span class="sig-paren">(</span><em>p=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.residual" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the vector residual to be optimized.</p>
<p>Arguments
p   –  The list of current variable values, provided in the same order</p>
<blockquote>
<div>as the ‘_parameters’ list. If p is an empty iterable (default),
then it is assumed that the parameters have already been
updated in some other way, and the explicit update within this
function is skipped.</div></blockquote>
<p>The residual is by default the weighted concatenation of each
FitContribution’s residual, plus the value of each restraint. The array
returned, denoted chiv, is such that
dot(chiv, chiv) = chi^2 + restraints.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.scalarResidual">
<code class="descname">scalarResidual</code><span class="sig-paren">(</span><em>p=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.scalarResidual" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the scalar residual to be optimized.</p>
<p>Arguments
p   –  The list of current variable values, provided in the same order</p>
<blockquote>
<div>as the ‘_parameters’ list. If p is an empty iterable (default),
then it is assumed that the parameters have already been
updated in some other way, and the explicit update within this
function is skipped.</div></blockquote>
<p>The residual is by default the weighted concatenation of each
FitContribution’s residual, plus the value of each restraint. The array
returned, denoted chiv, is such that
dot(chiv, chiv) = chi^2 + restraints.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.setWeight">
<code class="descname">setWeight</code><span class="sig-paren">(</span><em>con</em>, <em>weight</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.setWeight" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the weight of a FitContribution.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitrecipe.FitRecipe.unconstrain">
<code class="descname">unconstrain</code><span class="sig-paren">(</span><em>*pars</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe.unconstrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Unconstrain a Parameter.</p>
<p>This removes any constraints on a Parameter. If the Parameter is also a
variable of the recipe, it will be freed as well.</p>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>pars   –  The names of Parameters or Parameters to unconstrain.</p>
<p>Raises ValueError if the Parameter is not constrained.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.fitresults">
<span id="diffpy-srfit-fitbase-fitresults-module"></span><h2>diffpy.srfit.fitbase.fitresults module<a class="headerlink" href="#module-diffpy.srfit.fitbase.fitresults" title="Permalink to this headline">¶</a></h2>
<p>The FitResults and ContributionResults classes for storing results of a fit.</p>
<p>The FitResults class is used to display the current state of a FitRecipe. It
stores the state, and uses it to calculate useful statistics, which can be
displayed on screen or saved to file.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.fitresults.FitResults">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.fitresults.</code><code class="descname">FitResults</code><span class="sig-paren">(</span><em>recipe</em>, <em>update=True</em>, <em>showfixed=True</em>, <em>showcon=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitresults.FitResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class for processing, presenting and storing results of a fit.</p>
<p>Attributes
recipe      –  The recipe containing the results.
cov         –  The covariance matrix from the recipe.
conresults  –  An ordered dictionary of ContributionResults for each</p>
<blockquote>
<div>FitContribution, indexed by the FitContribution name.</div></blockquote>
<dl class="docutils">
<dt>derivstep   –  The fractional step size for calculating numeric</dt>
<dd>derivatives. Default 1e-8.</dd>
</dl>
<p>varnames    –  Names of the variables in the recipe.
varvals     –  Values of the variables in the recipe.
varunc      –  Uncertainties in the variable values.
showfixed   –  Show fixed variables (default True).
fixednames  –  Names of the fixed variables of the recipe.
fixedvals   –  Values of the fixed variables of the recipe.
showcon     –  Show constraint values in the output (default False).
connames    –  Names of the constrained parameters.
convals     –  Values of the constrained parameters.
conunc      –  Uncertainties in the constraint values.
residual    –  The scalar residual of the recipe.
penalty     –  The penalty to residual from the restraints.
chi2        –  The chi2 of the recipe.
cumchi2     –  The cumulative chi2 of the recipe.
rchi2       –  The reduced chi2 of the recipe.
rw          –  The Rw of the recipe.
cumrw       –  The cumulative Rw of the recipe.
messages    –  A list of messages about the results.
precision   –  The precision of numeric output (default 8).
_dcon       –  The derivatives of the constraint equations with respect to</p>
<blockquote>
<div>the variables. This is used internally.</div></blockquote>
<p>Each of these attributes, except the recipe, are created or updated when
the update method is called.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.fitresults.FitResults.formatResults">
<code class="descname">formatResults</code><span class="sig-paren">(</span><em>header=''</em>, <em>footer=''</em>, <em>update=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitresults.FitResults.formatResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the results and return them in a string.</p>
<p>This function is called by printResults and saveResults. Overloading
the formatting here will change all three functions.</p>
<p>header  –  A header to add to the output (default “”)
footer  –  A footer to add to the output (default “”)
update  –  Flag indicating whether to call update() (default False).</p>
<p>Returns a string containing the formatted results.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitresults.FitResults.printResults">
<code class="descname">printResults</code><span class="sig-paren">(</span><em>header=''</em>, <em>footer=''</em>, <em>update=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitresults.FitResults.printResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Format and print the results.</p>
<p>header  –  A header to add to the output (default “”)
footer  –  A footer to add to the output (default “”)
update  –  Flag indicating whether to call update() (default False).</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitresults.FitResults.saveResults">
<code class="descname">saveResults</code><span class="sig-paren">(</span><em>filename</em>, <em>header=''</em>, <em>footer=''</em>, <em>update=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitresults.FitResults.saveResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Format and save the results.</p>
<p>filename -  Name of the save file.
header  –  A header to add to the output (default “”)
footer  –  A footer to add to the output (default “”)
update  –  Flag indicating whether to call update() (default False).</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.fitresults.FitResults.update">
<code class="descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitresults.FitResults.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the results according to the current state of the recipe.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.fitresults.ContributionResults">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.fitresults.</code><code class="descname">ContributionResults</code><span class="sig-paren">(</span><em>con</em>, <em>weight</em>, <em>fitres</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitresults.ContributionResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class for processing, storing FitContribution results.</p>
<p>This does not store the FitContribution.</p>
<p>Attributes
y       –  The FitContribution’s profile over the calculation range</p>
<blockquote>
<div>(default None).</div></blockquote>
<dl class="docutils">
<dt>dy      –  The uncertainty in the FitContribution’s profile over the</dt>
<dd>calculation range (default None).</dd>
<dt>x       –  A numpy array of the calculated independent variable for the</dt>
<dd>FitContribution (default None).</dd>
<dt>ycalc   –  A numpy array of the calculated signal for the FitContribution</dt>
<dd>(default None).</dd>
</dl>
<p>residual    –  The scalar residual of the FitContribution.
chi2        –  The chi2 of the FitContribution.
cumchi2     –  The cumulative chi2 of the FitContribution.
rw          –  The Rw of the FitContribution.
cumrw       –  The cumulative Rw of the FitContribution.
weight      –  The weight of the FitContribution in the recipe.
conlocs     –  The location of the constrained parameters in the</p>
<blockquote>
<div>FitContribution (see the
RecipeContainer._locateManagedObject method).</div></blockquote>
<p>convals     –  Values of the constrained parameters.
conunc      –  Uncertainties in the constraint values.</p>
</dd></dl>

<dl class="function">
<dt id="diffpy.srfit.fitbase.fitresults.initializeRecipe">
<code class="descclassname">diffpy.srfit.fitbase.fitresults.</code><code class="descname">initializeRecipe</code><span class="sig-paren">(</span><em>recipe</em>, <em>results</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.fitresults.initializeRecipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the variables of a recipe from a results file.</p>
<p>This reads the results from file and initializes any variables (fixed or
free) in the recipe to the results values. Note that the recipe has to be
configured, with variables. This does not reconstruct a FitRecipe.</p>
<p>recipe  –  A configured recipe with variables
results –  An open file-like object, name of a file that contains</p>
<blockquote>
<div>results from FitResults or a string containing fit results.</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.parameter">
<span id="diffpy-srfit-fitbase-parameter-module"></span><h2>diffpy.srfit.fitbase.parameter module<a class="headerlink" href="#module-diffpy.srfit.fitbase.parameter" title="Permalink to this headline">¶</a></h2>
<p>Parameter classes.</p>
<p>Parameters encapsulate an adjustable parameter within SrFit.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.parameter.Parameter">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.parameter.</code><code class="descname">Parameter</code><span class="sig-paren">(</span><em>name</em>, <em>value=None</em>, <em>const=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.Parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.interface.html#diffpy.srfit.interface.interface.ParameterInterface" title="diffpy.srfit.interface.interface.ParameterInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.interface.interface.ParameterInterface</span></code></a>, <a class="reference internal" href="diffpy.srfit.equation.literals.html#diffpy.srfit.equation.literals.argument.Argument" title="diffpy.srfit.equation.literals.argument.Argument"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.equation.literals.argument.Argument</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.validatable.Validatable" title="diffpy.srfit.fitbase.validatable.Validatable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.validatable.Validatable</span></code></a></p>
<p>Parameter class.</p>
<p>Attributes
name    –  A name for this Parameter.
const   –  A flag indicating whether this is considered a constant.
_value  –  The value of the Parameter. Modified with ‘setValue’.
value   –  Property for ‘getValue’ and ‘setValue’.
constrained –  A flag indicating if the Parameter is constrained</p>
<blockquote>
<div>(default False).</div></blockquote>
<dl class="docutils">
<dt>bounds  –  A 2-list defining the bounds on the Parameter. This can be</dt>
<dd>used by some optimizers when the Parameter is varied. See
FitRecipe.getBounds and FitRecipe.boundsToRestraints.</dd>
</dl>
<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.Parameter.boundRange">
<code class="descname">boundRange</code><span class="sig-paren">(</span><em>lb=None</em>, <em>ub=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.Parameter.boundRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Set lower and upper bound of the Parameter.</p>
<p>lb  – The lower bound for the bounds list.
ub  – The upper bound for the bounds list.</p>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.Parameter.boundWindow">
<code class="descname">boundWindow</code><span class="sig-paren">(</span><em>lr=0</em>, <em>ur=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.Parameter.boundWindow" title="Permalink to this definition">¶</a></dt>
<dd><p>Create bounds centered on the current value of the Parameter.</p>
<dl class="docutils">
<dt>lr  –  The radius of the lower bound (default 0). The lower bound is</dt>
<dd>computed as value - lr.</dd>
<dt>ur  –  The radius of the upper bound. The upper bound is computed as</dt>
<dd>value + ur. If this is None (default), then the value of the
lower radius is used.</dd>
</dl>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.Parameter.setConst">
<code class="descname">setConst</code><span class="sig-paren">(</span><em>const=True</em>, <em>value=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.Parameter.setConst" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggle the Parameter as constant.</p>
<dl class="docutils">
<dt>const   –  Flag indicating if the parameter is constant (default</dt>
<dd>True).</dd>
<dt>value   –  An optional value for the parameter (default None). If this</dt>
<dd>is not None, then the parameter will get a new value,
constant or otherwise.</dd>
</dl>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.Parameter.setValue">
<code class="descname">setValue</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.Parameter.setValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of the Parameter and the bounds.</p>
<p>val     –  The value to assign.
lb      –  The lower bounds for the bounds list. If this is None</p>
<blockquote>
<div>(default), then the lower bound will not be alterered.</div></blockquote>
<dl class="docutils">
<dt>ub      –  The upper bounds for the bounds list. If this is None</dt>
<dd>(default), then the upper bound will not be alterered.</dd>
</dl>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.parameter.ParameterProxy">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.parameter.</code><code class="descname">ParameterProxy</code><span class="sig-paren">(</span><em>name</em>, <em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterProxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.fitbase.parameter.Parameter" title="diffpy.srfit.fitbase.parameter.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.parameter.Parameter</span></code></a></p>
<p>A Parameter proxy for another parameter.</p>
<p>This allows for the same parameter to have multiple names.</p>
<p>Attributes
name    –  A name for this ParameterProxy. Names should be unique within a</p>
<blockquote>
<div>RecipeOrganizer and should be valid attribute names.</div></blockquote>
<p>par     –  The Parameter this is a proxy for.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.ParameterProxy.boundRange">
<code class="descname">boundRange</code><span class="sig-paren">(</span><em>lb=None</em>, <em>ub=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterProxy.boundRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Set lower and upper bound of the Parameter.</p>
<p>lb  – The lower bound for the bounds list.
ub  – The upper bound for the bounds list.</p>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.ParameterProxy.boundWindow">
<code class="descname">boundWindow</code><span class="sig-paren">(</span><em>lr=0</em>, <em>ur=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterProxy.boundWindow" title="Permalink to this definition">¶</a></dt>
<dd><p>Create bounds centered on the current value of the Parameter.</p>
<dl class="docutils">
<dt>lr  –  The radius of the lower bound (default 0). The lower bound is</dt>
<dd>computed as value - lr.</dd>
<dt>ur  –  The radius of the upper bound. The upper bound is computed as</dt>
<dd>value + ur. If this is None (default), then the value of the
lower radius is used.</dd>
</dl>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.parameter.ParameterProxy.bounds">
<code class="descname">bounds</code><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterProxy.bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>List of lower and upper bounds of the proxied Parameter.</p>
<p>This can be used by some optimizers when the Parameter is varied.
See FitRecipe.getBounds and FitRecipe.boundsToRestraints.</p>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.parameter.ParameterProxy.constrained">
<code class="descname">constrained</code><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterProxy.constrained" title="Permalink to this definition">¶</a></dt>
<dd><p>A flag indicating if the proxied Parameter is constrained.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.ParameterProxy.getValue">
<code class="descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterProxy.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of this Literal.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.ParameterProxy.setConst">
<code class="descname">setConst</code><span class="sig-paren">(</span><em>const=True</em>, <em>value=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterProxy.setConst" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggle the Parameter as constant.</p>
<dl class="docutils">
<dt>const   –  Flag indicating if the parameter is constant (default</dt>
<dd>True).</dd>
<dt>value   –  An optional value for the parameter (default None). If this</dt>
<dd>is not None, then the parameter will get a new value,
constant or otherwise.</dd>
</dl>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.ParameterProxy.setValue">
<code class="descname">setValue</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterProxy.setValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of the Parameter and the bounds.</p>
<p>val     –  The value to assign.
lb      –  The lower bounds for the bounds list. If this is None</p>
<blockquote>
<div>(default), then the lower bound will not be alterered.</div></blockquote>
<dl class="docutils">
<dt>ub      –  The upper bounds for the bounds list. If this is None</dt>
<dd>(default), then the upper bound will not be alterered.</dd>
</dl>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.parameter.ParameterAdapter">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.parameter.</code><code class="descname">ParameterAdapter</code><span class="sig-paren">(</span><em>name</em>, <em>obj</em>, <em>getter=None</em>, <em>setter=None</em>, <em>attr=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.fitbase.parameter.Parameter" title="diffpy.srfit.fitbase.parameter.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.parameter.Parameter</span></code></a></p>
<p>An adapter for parameter-like objects.</p>
<p>This class wraps an object as a Parameter. The getValue and setValue
methods defer to the data of the wrapped object.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.ParameterAdapter.getValue">
<code class="descname">getValue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterAdapter.getValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of the Parameter.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameter.ParameterAdapter.setValue">
<code class="descname">setValue</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameter.ParameterAdapter.setValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of the Parameter.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.parameterset">
<span id="diffpy-srfit-fitbase-parameterset-module"></span><h2>diffpy.srfit.fitbase.parameterset module<a class="headerlink" href="#module-diffpy.srfit.fitbase.parameterset" title="Permalink to this headline">¶</a></h2>
<p>ParameterSet class.</p>
<p>ParameterSets organize Parameters, Constraints, Restraints and other
ParameterSets. They provide attribute-access of other ParameterSets and
embedded Parameters.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.parameterset.ParameterSet">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.parameterset.</code><code class="descname">ParameterSet</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameterset.ParameterSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer" title="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer</span></code></a></p>
<p>Class for organizing Parameters and other ParameterSets.</p>
<p>ParameterSets are hierarchical organizations of Parameters, Constraints,
Restraints and other ParameterSets.</p>
<p>Contained Parameters and other ParameterSets can be accessed by name as
attributes in order to facilitate multi-level constraints and restraints.
These constraints and restraints can be placed at any level and a flattened
list of them can be retrieved with the getConstraints and getRestraints
methods.</p>
<p>Attributes
name            –  A name for this organizer.
_calculators    –  A managed dictionary of Calculators, indexed by name.
_constraints    –  A set of constrained Parameters. Constraints can be</p>
<blockquote>
<div>added using the ‘constrain’ methods.</div></blockquote>
<p>_parameters     –  A managed OrderedDict of parameters.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ methods.</div></blockquote>
<p>_parsets        –  A managed dictionary of ParameterSets.
_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</p>
<blockquote>
<div>instance that is used to create constraints and
restraints from string equations.</div></blockquote>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.parameterset.ParameterSet.addParameter">
<code class="descname">addParameter</code><span class="sig-paren">(</span><em>par</em>, <em>check=True</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameterset.ParameterSet.addParameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a Parameter.</p>
<p>Parameters added in this way are registered with the _eqfactory.</p>
<p>par     –  The Parameter to be stored.
check   –  If True (default), a ValueError is raised a Parameter of</p>
<blockquote>
<div>the specified name has already been inserted.</div></blockquote>
<p>Raises ValueError if the Parameter has no name.
Raises ValueError if the Parameter has the same name as a contained
RecipeContainer.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameterset.ParameterSet.addParameterSet">
<code class="descname">addParameterSet</code><span class="sig-paren">(</span><em>parset</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameterset.ParameterSet.addParameterSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a ParameterSet to the hierarchy.</p>
<p>parset  –  The ParameterSet to be stored.</p>
<p>Raises ValueError if the ParameterSet has no name.
Raises ValueError if the ParameterSet has the same name as some other
managed object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameterset.ParameterSet.newParameter">
<code class="descname">newParameter</code><span class="sig-paren">(</span><em>name</em>, <em>value</em>, <em>check=True</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameterset.ParameterSet.newParameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new Parameter to the container.</p>
<p>This creates a new Parameter and adds it to the container using the
_addParameter method.</p>
<p>Returns the Parameter.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameterset.ParameterSet.removeParameter">
<code class="descname">removeParameter</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameterset.ParameterSet.removeParameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a parameter.</p>
<p>This de-registers the Parameter with the _eqfactory. The Parameter will
remain part of built equations.</p>
<p>Note that constraints and restraints involving the Parameter are not
modified.</p>
<p>Raises ValueError if par is not part of the RecipeOrganizer.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameterset.ParameterSet.removeParameterSet">
<code class="descname">removeParameterSet</code><span class="sig-paren">(</span><em>parset</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameterset.ParameterSet.removeParameterSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a ParameterSet from the hierarchy.</p>
<p>Raises ValueError if parset is not managed by this object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.parameterset.ParameterSet.setConst">
<code class="descname">setConst</code><span class="sig-paren">(</span><em>const=True</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.parameterset.ParameterSet.setConst" title="Permalink to this definition">¶</a></dt>
<dd><p>Set every parameter within the set to a constant.</p>
<dl class="docutils">
<dt>const   –  Flag indicating if the parameter is constant (default</dt>
<dd>True).</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.profile">
<span id="diffpy-srfit-fitbase-profile-module"></span><h2>diffpy.srfit.fitbase.profile module<a class="headerlink" href="#module-diffpy.srfit.fitbase.profile" title="Permalink to this headline">¶</a></h2>
<p>The Profile class containing the physical and calculated data.</p>
<p>Profile holds the arrays representing an observed profile, a selected subset of
the observed profile and a calculated profile. Profiles are used by Calculators
to store a calculated signal, and by FitContributions to help calculate a
residual equation.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.profile.Parameter">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.profile.</code><code class="descname">Parameter</code><span class="sig-paren">(</span><em>name</em>, <em>value=None</em>, <em>const=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.interface.html#diffpy.srfit.interface.interface.ParameterInterface" title="diffpy.srfit.interface.interface.ParameterInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.interface.interface.ParameterInterface</span></code></a>, <a class="reference internal" href="diffpy.srfit.equation.literals.html#diffpy.srfit.equation.literals.argument.Argument" title="diffpy.srfit.equation.literals.argument.Argument"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.equation.literals.argument.Argument</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.validatable.Validatable" title="diffpy.srfit.fitbase.validatable.Validatable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.validatable.Validatable</span></code></a></p>
<p>Parameter class.</p>
<p>Attributes
name    –  A name for this Parameter.
const   –  A flag indicating whether this is considered a constant.
_value  –  The value of the Parameter. Modified with ‘setValue’.
value   –  Property for ‘getValue’ and ‘setValue’.
constrained –  A flag indicating if the Parameter is constrained</p>
<blockquote>
<div>(default False).</div></blockquote>
<dl class="docutils">
<dt>bounds  –  A 2-list defining the bounds on the Parameter. This can be</dt>
<dd>used by some optimizers when the Parameter is varied. See
FitRecipe.getBounds and FitRecipe.boundsToRestraints.</dd>
</dl>
<dl class="method">
<dt id="diffpy.srfit.fitbase.profile.Parameter.boundRange">
<code class="descname">boundRange</code><span class="sig-paren">(</span><em>lb=None</em>, <em>ub=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Parameter.boundRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Set lower and upper bound of the Parameter.</p>
<p>lb  – The lower bound for the bounds list.
ub  – The upper bound for the bounds list.</p>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profile.Parameter.boundWindow">
<code class="descname">boundWindow</code><span class="sig-paren">(</span><em>lr=0</em>, <em>ur=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Parameter.boundWindow" title="Permalink to this definition">¶</a></dt>
<dd><p>Create bounds centered on the current value of the Parameter.</p>
<dl class="docutils">
<dt>lr  –  The radius of the lower bound (default 0). The lower bound is</dt>
<dd>computed as value - lr.</dd>
<dt>ur  –  The radius of the upper bound. The upper bound is computed as</dt>
<dd>value + ur. If this is None (default), then the value of the
lower radius is used.</dd>
</dl>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profile.Parameter.setConst">
<code class="descname">setConst</code><span class="sig-paren">(</span><em>const=True</em>, <em>value=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Parameter.setConst" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggle the Parameter as constant.</p>
<dl class="docutils">
<dt>const   –  Flag indicating if the parameter is constant (default</dt>
<dd>True).</dd>
<dt>value   –  An optional value for the parameter (default None). If this</dt>
<dd>is not None, then the parameter will get a new value,
constant or otherwise.</dd>
</dl>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profile.Parameter.setValue">
<code class="descname">setValue</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Parameter.setValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of the Parameter and the bounds.</p>
<p>val     –  The value to assign.
lb      –  The lower bounds for the bounds list. If this is None</p>
<blockquote>
<div>(default), then the lower bound will not be alterered.</div></blockquote>
<dl class="docutils">
<dt>ub      –  The upper bounds for the bounds list. If this is None</dt>
<dd>(default), then the upper bound will not be alterered.</dd>
</dl>
<p>Returns self so that mutators can be chained.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.profile.Profile">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.profile.</code><code class="descname">Profile</code><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.util.html#diffpy.srfit.util.observable.Observable" title="diffpy.srfit.util.observable.Observable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.util.observable.Observable</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.validatable.Validatable" title="diffpy.srfit.fitbase.validatable.Validatable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.validatable.Validatable</span></code></a></p>
<p>Observed and calculated profile container.</p>
<p>Profile is an Observable. The xpar, ypar and dypar attributes are observed
by the Profile, which can in turn be observed by some other object.</p>
<p>Attributes</p>
<dl class="docutils">
<dt>_xobs   –  A numpy array of the observed independent variable (default</dt>
<dd>None)</dd>
</dl>
<p>xobs    –  Read-only property of _xobs.
_yobs   –  A numpy array of the observed signal (default None)
yobs    –  Read-only property of _yobs.
_dyobs  –  A numpy array of the uncertainty of the observed signal (default</p>
<blockquote>
<div>None, optional).</div></blockquote>
<p>dyobs   –  Read-only property of _dyobs.
x       –  A numpy array of the calculated independent variable (default</p>
<blockquote>
<div>None, property for xpar accessors).</div></blockquote>
<dl class="docutils">
<dt>y       –  The profile over the calculation range (default None, property</dt>
<dd>for ypar accessors).</dd>
<dt>dy      –  The uncertainty in the profile over the calculation range</dt>
<dd>(default None, property for dypar accessors).</dd>
</dl>
<p>ycalc   –  A numpy array of the calculated signal (default None).
xpar    –  A Parameter that stores x (named “x”).
ypar    –  A Parameter that stores y (named “y”).
dypar   –  A Parameter that stores dy (named “dy”).
ycpar   –  A Parameter that stores ycalc (named “ycalc”). This is</p>
<blockquote>
<div>not observed by the profile, but it is present so it can be
constrained to.</div></blockquote>
<dl class="docutils">
<dt>meta    –  A dictionary of metadata. This is only set if provided by a</dt>
<dd>parser.</dd>
</dl>
<dl class="attribute">
<dt id="diffpy.srfit.fitbase.profile.Profile.dy">
<code class="descname">dy</code><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.dy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.profile.Profile.dyobs">
<code class="descname">dyobs</code><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.dyobs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profile.Profile.loadParsedData">
<code class="descname">loadParsedData</code><span class="sig-paren">(</span><em>parser</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.loadParsedData" title="Permalink to this definition">¶</a></dt>
<dd><p>Load parsed data from a ProfileParser.</p>
<p>This sets the xobs, yobs, dyobs arrays as well as the metadata.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profile.Profile.loadtxt">
<code class="descname">loadtxt</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.loadtxt" title="Permalink to this definition">¶</a></dt>
<dd><p>Use numpy.loadtxt to load data.</p>
<p>Arguments are passed to numpy.loadtxt.
unpack = True is enforced.
The first two arrays returned by numpy.loadtxt are assumed to be x and
y.  If there is a third array, it is assumed to by dy. Any other arrays
are ignored. These are passed to setObservedProfile.</p>
<p>Raises ValueError if the call to numpy.loadtxt returns fewer than 2
arrays.</p>
<p>Returns the x, y and dy arrays loaded from the file</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profile.Profile.savetxt">
<code class="descname">savetxt</code><span class="sig-paren">(</span><em>fname</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.savetxt" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <cite>numpy.savetxt</cite> with x, ycalc, y, dy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fname</strong> (<em>filename</em><em> or </em><em>file handle</em>) – This is passed to <cite>numpy.savetxt</cite>.</li>
<li><strong>**kwargs</strong> – The keyword arguments that are passed to <cite>numpy.savetxt</cite>.
We preset file header “x  ycalc  y  dy”.  Use <code class="docutils literal notranslate"><span class="pre">header=''</span></code>
to save data without any header.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SrFitError</span></code> – When <cite>self.ycalc</cite> has not been set.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">numpy.savetxt()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profile.Profile.setCalculationPoints">
<code class="descname">setCalculationPoints</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.setCalculationPoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the calculation points.</p>
<p>Arguments
x   –  A non-empty numpy array containing the calculation points. If</p>
<blockquote>
<div>xobs exists, the bounds of x will be limited to its bounds.</div></blockquote>
<p>This will create y and dy on the specified grid if xobs, yobs and
dyobs exist.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profile.Profile.setCalculationRange">
<code class="descname">setCalculationRange</code><span class="sig-paren">(</span><em>xmin=None</em>, <em>xmax=None</em>, <em>dx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.setCalculationRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Set epsilon-inclusive calculation range.</p>
<p>Adhere to the observed <code class="docutils literal notranslate"><span class="pre">xobs</span></code> points when <code class="docutils literal notranslate"><span class="pre">dx</span></code> is the same
as in the data.  <code class="docutils literal notranslate"><span class="pre">xmin</span></code> and <code class="docutils literal notranslate"><span class="pre">xmax</span></code> are clipped at the bounds
of the observed data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmin</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The minimum value of the independent variable.  Keep the
current minimum when not specified.  If specified as “obs”
reset to the minimum observed value.</li>
<li><strong>xmax</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The maximum value of the independent variable.  Keep the
current maximum when not specified.  If specified as “obs”
reset to the maximum observed value.</li>
<li><strong>dx</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The sample spacing in the independent variable.  When different
from the data, resample the <code class="docutils literal notranslate"><span class="pre">x</span></code> as anchored at <code class="docutils literal notranslate"><span class="pre">xmin</span></code>.</li>
<li><strong>that xmin is always inclusive</strong><strong> (</strong><strong>unless clipped</strong><strong>)</strong><strong> xmax is inclusive</strong> (<em>Note</em>) – </li>
<li><strong>it is within the bounds of the observed data.</strong> (<em>if</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#AttributeError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> – If there is no observed data.</li>
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – When xmin &gt; xmax or if dx &lt;= 0.  Also if dx &gt; xmax - xmin.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profile.Profile.setObservedProfile">
<code class="descname">setObservedProfile</code><span class="sig-paren">(</span><em>xobs</em>, <em>yobs</em>, <em>dyobs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.setObservedProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the observed profile.</p>
<p>Arguments
xobs    –  Numpy array of the independent variable
yobs    –  Numpy array of the observed signal.
dyobs   –  Numpy array of the uncertainty in the observed signal. If</p>
<blockquote>
<div>dyobs is None (default), it will be set to 1 at each
observed xobs.</div></blockquote>
<p>Raises ValueError if len(yobs) != len(xobs)
Raises ValueError if dyobs != None and len(dyobs) != len(xobs)</p>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.profile.Profile.x">
<code class="descname">x</code><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.x" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.profile.Profile.xobs">
<code class="descname">xobs</code><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.xobs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.profile.Profile.y">
<code class="descname">y</code><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.y" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.profile.Profile.ycalc">
<code class="descname">ycalc</code><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.ycalc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.profile.Profile.yobs">
<code class="descname">yobs</code><a class="headerlink" href="#diffpy.srfit.fitbase.profile.Profile.yobs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.profilegenerator">
<span id="diffpy-srfit-fitbase-profilegenerator-module"></span><h2>diffpy.srfit.fitbase.profilegenerator module<a class="headerlink" href="#module-diffpy.srfit.fitbase.profilegenerator" title="Permalink to this headline">¶</a></h2>
<p>The ProfileGenerator class for generating a profile.</p>
<p>ProfileGenerators encapsulate the evaluation and required Parameters and
ParameterSets of a profile calculator.  The ProfileGenerator class can be
associated with a FitContribution to help calculate a profile.</p>
<p>To define a ProfileGenerator, one must implement the required Parameters and
ParameterSets as well as overload the __call__ method with the calculation. A
very simple example is
&gt; class Gaussian(ProfileGenerator):
&gt;
&gt;    def __init__(self):
&gt;        # Initialize and give this a name
&gt;        ProfileGenerator.__init__(self, “g”)
&gt;        # Add amplitude, center and width parameters
&gt;        self.newParameter(“amp”, 0)
&gt;        self.newParameter(“center”, 0)
&gt;        self.newParameter(“width”, 0)
&gt;
&gt;    def __call__(self, x):
&gt;        a = self.amp.getValue()
&gt;        x0 = self.center.getValue()
&gt;        w = self.width.getValue()
&gt;        return a * exp(-0.5*((x-x0)/w)**2)</p>
<p>More examples can be found in the example directory of the documentation.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.profilegenerator.ProfileGenerator">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.profilegenerator.</code><code class="descname">ProfileGenerator</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profilegenerator.ProfileGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.equation.literals.html#diffpy.srfit.equation.literals.operators.Operator" title="diffpy.srfit.equation.literals.operators.Operator"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.equation.literals.operators.Operator</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.parameterset.ParameterSet" title="diffpy.srfit.fitbase.parameterset.ParameterSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.parameterset.ParameterSet</span></code></a></p>
<p>Base class for profile generators.</p>
<p>A ProfileGenerator organizes Parameters and has a __call__ method that can
generate a profile. ProfileGenerator is also an Operator
(diffpy.srfit.equation.literals.operators), so it can be used directly in
an evaluation network.</p>
<p>Attributes
name            –  A name for this organizer.
profile         –  A Profile instance that contains the calculation range</p>
<blockquote>
<div>and will contain the generated profile.</div></blockquote>
<p>meta            –  A dictionary of metadata needed by the generator.
eq              –  The Equation object used to wrap this ProfileGenerator.</p>
<blockquote>
<div>This is set when the ProfileGenerator is added to a
FitContribution.</div></blockquote>
<p>_calculators    –  A managed dictionary of Calculators, indexed by name.
_constraints    –  A set of constrained Parameters. Constraints can be</p>
<blockquote>
<div>added using the ‘constrain’ methods.</div></blockquote>
<p>_parameters     –  A managed OrderedDict of contained Parameters.
_parsets        –  A managed dictionary of ParameterSets.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ or ‘confine’ methods.</div></blockquote>
<dl class="docutils">
<dt>_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</dt>
<dd>instance that is used create Equations from string.</dd>
</dl>
<p>Operator Attributes
args    –  List of Literal arguments, set with ‘addLiteral’
name    –  A name for this operator. e.g. “add” or “sin”
nin     –  Number of inputs (&lt;1 means this is variable)
nout    –  Number of outputs
operation   –  Function that performs the operation. e.g. numpy.add. In</p>
<blockquote>
<div>this case, operation is an instance method.</div></blockquote>
<p>symbol  –  The symbolic representation. e.g. “+” or “sin”
_value  –  The value of the Operator.
value   –  Property for ‘getValue’.</p>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<dl class="attribute">
<dt id="diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.nin">
<code class="descname">nin</code><em class="property"> = 0</em><a class="headerlink" href="#diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.nin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.nout">
<code class="descname">nout</code><em class="property"> = 1</em><a class="headerlink" href="#diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.nout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.operation">
<code class="descname">operation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.operation" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the profile.</p>
<p>Return the result of __call__(profile.x).</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.processMetaData">
<code class="descname">processMetaData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.processMetaData" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the metadata.</p>
<p>This can be used to configure a ProfileGenerator upon a change in the
metadata. This method gets called whenever the Profile is set.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.setProfile">
<code class="descname">setProfile</code><span class="sig-paren">(</span><em>profile</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.setProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the profile.</p>
<dl class="docutils">
<dt>profile –  A Profile that specifies the calculation points and which</dt>
<dd>will store the calculated signal.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.symbol">
<code class="descname">symbol</code><a class="headerlink" href="#diffpy.srfit.fitbase.profilegenerator.ProfileGenerator.symbol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.profileparser">
<span id="diffpy-srfit-fitbase-profileparser-module"></span><h2>diffpy.srfit.fitbase.profileparser module<a class="headerlink" href="#module-diffpy.srfit.fitbase.profileparser" title="Permalink to this headline">¶</a></h2>
<p>This module contains classes for parsing profiles from files.</p>
<p>ProfileParser is a base class for parsing data. It can interact with a Profile
object to automatically set the Profile’s data and metadata. Each specific file
format must be encapsulated in a ProfileParser subclass.</p>
<p>See the class documentation for more information.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.profileparser.ProfileParser">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.profileparser.</code><code class="descname">ProfileParser</code><a class="headerlink" href="#diffpy.srfit.fitbase.profileparser.ProfileParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class for parsing data from a or string.</p>
<p>Attributes</p>
<dl class="docutils">
<dt>_format     –  Name of the data format that this parses (string, default</dt>
<dd>“”). The format string is a unique identifier for the data
format handled by the parser.</dd>
<dt>_banks      –  The data from each bank. Each bank contains a (x, y, dx, dy)</dt>
<dd><p class="first">tuple:
x       –  A numpy array containing the independent</p>
<blockquote>
<div>variable read from the file.</div></blockquote>
<dl class="last docutils">
<dt>y       –  A numpy array containing the profile</dt>
<dd>from the file.</dd>
<dt>dx      –  A numpy array containing the uncertainty in x</dt>
<dd>read from the file. This is None if the
uncertainty cannot be read.</dd>
<dt>dy      –  A numpy array containing the uncertainty read</dt>
<dd>from the file. This is None if the uncertainty
cannot be read.</dd>
</dl>
</dd>
</dl>
<p>_x          –  Indpendent variable from the chosen bank
_y          –  Profile from the chosen bank
_dx         –  Uncertainty in independent variable from the chosen bank
_dy         –  Uncertainty in profile from the chosen bank
_meta       –  A dictionary containing metadata read from the file.</p>
<p>General Metadata</p>
<dl class="docutils">
<dt>filename    –  The name of the file from which data was parsed. This key</dt>
<dd>will not exist if data was not read from file.</dd>
</dl>
<p>nbanks      –  The number of banks parsed.
bank        –  The chosen bank number.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.profileparser.ProfileParser.getData">
<code class="descname">getData</code><span class="sig-paren">(</span><em>index=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profileparser.ProfileParser.getData" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the data.</p>
<p>This method should only be called after the data has been parsed.  The
chosen bank number is not persistent, and so must be re-selected if the
parser is used to parse more data. This uses python list notation, so
index -n returns the nth bank from the end.</p>
<p>Arguments:
index  –   index of bank (integer, starting at 0, default None). If</p>
<blockquote>
<div>index is None then the currently selected bank is used.</div></blockquote>
<p>This returns (x, y, dx, dy) tuple for the bank. dx is 0 if it cannot
be determined from the data format.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profileparser.ProfileParser.getFormat">
<code class="descname">getFormat</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profileparser.ProfileParser.getFormat" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the format string.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profileparser.ProfileParser.getMetaData">
<code class="descname">getMetaData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profileparser.ProfileParser.getMetaData" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parsed metadata.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profileparser.ProfileParser.getNumBanks">
<code class="descname">getNumBanks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profileparser.ProfileParser.getNumBanks" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of banks read by the parser.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profileparser.ProfileParser.parseFile">
<code class="descname">parseFile</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profileparser.ProfileParser.parseFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a file and set the _x, _y, _dx, _dy and _meta variables.</p>
<p>This wipes out the currently loaded data and selected bank number.</p>
<p>Arguments
filename    –  The name of the file to parse</p>
<p>Raises IOError if the file cannot be read
Raises ParseError if the file cannot be parsed</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profileparser.ProfileParser.parseString">
<code class="descname">parseString</code><span class="sig-paren">(</span><em>patstring</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profileparser.ProfileParser.parseString" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a string and set the _x, _y, _dx, _dy and _meta variables.</p>
<p>When _dx or _dy cannot be obtained in the data format it is set to
None.</p>
<p>This wipes out the currently loaded data and selected bank number.</p>
<p>Arguments
patstring   –  A string containing the pattern</p>
<p>Raises ParseError if the string cannot be parsed</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.profileparser.ProfileParser.selectBank">
<code class="descname">selectBank</code><span class="sig-paren">(</span><em>index</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.profileparser.ProfileParser.selectBank" title="Permalink to this definition">¶</a></dt>
<dd><p>Select which bank to use.</p>
<p>This method should only be called after the data has been parsed.  The
chosen bank number is not persistent, and so must be re-selected if the
parser is used to parse more data. This uses python list notation, so
index -n returns the nth bank from the end.</p>
<p>Arguments:
index  –  index of bank (integer, starting at 0).</p>
<p>Raises IndexError if requesting a bank that does not exist</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.recipeorganizer">
<span id="diffpy-srfit-fitbase-recipeorganizer-module"></span><h2>diffpy.srfit.fitbase.recipeorganizer module<a class="headerlink" href="#module-diffpy.srfit.fitbase.recipeorganizer" title="Permalink to this headline">¶</a></h2>
<p>Base classes and tools for constructing a FitRecipe.</p>
<p>RecipeContainer is the base class for organizing Parameters, and other
RecipeContainers.  RecipeOrganizer is an extended RecipeContainer that
incorporates equation building, constraints and Restraints.  equationFromString
creates an Equation instance from a string.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeContainer">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.recipeorganizer.</code><code class="descname">RecipeContainer</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeContainer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.util.html#diffpy.srfit.util.observable.Observable" title="diffpy.srfit.util.observable.Observable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.util.observable.Observable</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.configurable.Configurable" title="diffpy.srfit.fitbase.configurable.Configurable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.configurable.Configurable</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.validatable.Validatable" title="diffpy.srfit.fitbase.validatable.Validatable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.validatable.Validatable</span></code></a></p>
<p>Base class for organizing pieces of a FitRecipe.</p>
<p>RecipeContainers are hierarchical organizations of Parameters and other
RecipeContainers. This class provides attribute-access to these contained
objects.  Parameters and other RecipeContainers can be found within the
hierarchy with the _locateManagedObject method.</p>
<p>A RecipeContainer can manage dictionaries for that store various objects.
These dictionaries can be added to the RecipeContainer using the _manage
method. RecipeContainer methods that add, remove or retrieve objects will
work with any managed dictionary. This makes it easy to add new types of
objects to be contained by a RecipeContainer. By default, the
RecipeContainer is configured to manage an OrderedDict of Parameter
objects.</p>
<p>RecipeContainer is an Observable, and observes its managed objects and
Parameters. This allows hierarchical calculation elements, such as
ProfileGenerator, to detect changes in Parameters and Restraints on which
it may depend.</p>
<p>Attributes
name            –  A name for this RecipeContainer. Names should be unique</p>
<blockquote>
<div>within a RecipeContainer and should be valid attribute
names.</div></blockquote>
<p>_parameters     –  A managed OrderedDict of contained Parameters.
__managed       –  A list of managed dictionaries. This is used for</p>
<blockquote>
<div>attribute access, addition and removal.</div></blockquote>
<dl class="docutils">
<dt>_configobjs     –  A set of configurable objects that must know of</dt>
<dd>configuration changes within this object.</dd>
</dl>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a managed object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.getNames">
<code class="descname">getNames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.getNames" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the names of managed parameters.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.getValues">
<code class="descname">getValues</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.getValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the values of managed parameters.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.iterPars">
<code class="descname">iterPars</code><span class="sig-paren">(</span><em>pattern=''</em>, <em>recurse=True</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.iterPars" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the Parameters contained in this object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pattern</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Iterate over parameters with names matching this regular
expression (all parameters by default).</li>
<li><strong>recurse</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Recurse into managed objects when True (default).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.names">
<code class="descname">names</code><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.names" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.values">
<code class="descname">values</code><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeContainer.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.recipeorganizer.</code><code class="descname">RecipeOrganizer</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.interface.html#diffpy.srfit.interface.interface.RecipeOrganizerInterface" title="diffpy.srfit.interface.interface.RecipeOrganizerInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.interface.interface.RecipeOrganizerInterface</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeContainer" title="diffpy.srfit.fitbase.recipeorganizer.RecipeContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.recipeorganizer.RecipeContainer</span></code></a></p>
<p>Extended base class for organizing pieces of a FitRecipe.</p>
<p>This class extends RecipeContainer by organizing constraints and
Restraints, as well as Equations that can be used in Constraint and
Restraint equations.  These constraints and Restraints can be placed at any
level and a flattened list of them can be retrieved with the
_getConstraints and _getRestraints methods.</p>
<p>Attributes
name            –  A name for this organizer. Names should be unique</p>
<blockquote>
<div>within a RecipeOrganizer and should be valid attribute
names.</div></blockquote>
<p>_calculators    –  A managed dictionary of Calculators, indexed by name.
_parameters     –  A managed OrderedDict of contained Parameters.
_constraints    –  A dictionary of Constraints, indexed by the constrained</p>
<blockquote>
<div>Parameter. Constraints can be added using the
‘constrain’ method.</div></blockquote>
<dl class="docutils">
<dt>_restraints     –  A set of Restraints. Restraints can be added using the</dt>
<dd>‘restrain’ method.</dd>
<dt>_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</dt>
<dd>instance that is used create Equations from string.</dd>
</dl>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<p>Raises ValueError if the name is not a valid attribute identifier</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.addRestraint">
<code class="descname">addRestraint</code><span class="sig-paren">(</span><em>res</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.addRestraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a Restraint instance to the RecipeOrganizer.</p>
<p>res     –  A Restraint instance.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.clearConstraints">
<code class="descname">clearConstraints</code><span class="sig-paren">(</span><em>recurse=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.clearConstraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all constraints managed by this organizer.</p>
<dl class="docutils">
<dt>recurse –  Recurse into managed objects and clear all constraints</dt>
<dd>found there as well.</dd>
</dl>
<p>This removes constraints that are held in this organizer, no matter
where the constrained parameters are from.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.clearRestraints">
<code class="descname">clearRestraints</code><span class="sig-paren">(</span><em>recurse=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.clearRestraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all restraints.</p>
<dl class="docutils">
<dt>recurse –  Recurse into managed objects and clear all restraints</dt>
<dd>found there as well.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.constrain">
<code class="descname">constrain</code><span class="sig-paren">(</span><em>par</em>, <em>con</em>, <em>ns={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.constrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Constrain a parameter to an equation.</p>
<p>Note that only one constraint can exist on a Parameter at a time.</p>
<p>par     –  The name of a Parameter or a Parameter to constrain.
con     –  A string representation of the constraint equation or a</p>
<blockquote>
<div>Parameter to constrain to.  A constraint equation must
consist of numpy operators and “known” Parameters.
Parameters are known if they are in the ns argument, or if
they are managed by this object.</div></blockquote>
<dl class="docutils">
<dt>ns      –  A dictionary of Parameters, indexed by name, that are used</dt>
<dd>in the parameter, but not part of this object (default {}).</dd>
</dl>
<p>Raises ValueError if ns uses a name that is already used for a
variable.
Raises ValueError if par is a string but not part of this object or in
ns.
Raises ValueError if par is marked as constant.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.evaluateEquation">
<code class="descname">evaluateEquation</code><span class="sig-paren">(</span><em>eqstr</em>, <em>ns={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.evaluateEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate a string equation.</p>
<dl class="docutils">
<dt>eqstr   –  A string equation to evaluate. The equation is evaluated at</dt>
<dd>the current value of the registered Parameters.</dd>
<dt>ns      –  A dictionary of Parameters, indexed by name, that are</dt>
<dd>used in fstr, but not part of the FitRecipe (default {}).</dd>
</dl>
<p>Raises ValueError if ns uses a name that is already used for a
variable.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.getConstrainedPars">
<code class="descname">getConstrainedPars</code><span class="sig-paren">(</span><em>recurse=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.getConstrainedPars" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of constrained managed Parameters in this object.</p>
<dl class="docutils">
<dt>recurse –  Recurse into managed objects and retrive their constrained</dt>
<dd>Parameters as well (default False).</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.isConstrained">
<code class="descname">isConstrained</code><span class="sig-paren">(</span><em>par</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.isConstrained" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if a Parameter is constrained in this object.</p>
<p>par     –  The name of a Parameter or a Parameter to check.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.registerCalculator">
<code class="descname">registerCalculator</code><span class="sig-paren">(</span><em>f</em>, <em>argnames=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.registerCalculator" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a Calculator so it can be used within equation strings.</p>
<p>A Calculator is an elaborate function that can organize Parameters.
This creates a function with this class that can be used within string
equations. The resulting equation can be used in a string with
arguments like a function or without, in which case the values of the
Parameters created from argnames will be be used to compute the value.</p>
<p>f           –  The Calculator to register.
argnames    –  The names of the arguments to f (list or None).</p>
<blockquote>
<div>If this is None, then the argument names will be
extracted from the function.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.registerFunction">
<code class="descname">registerFunction</code><span class="sig-paren">(</span><em>f</em>, <em>name=None</em>, <em>argnames=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.registerFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a function so it can be used within equation strings.</p>
<p>This creates a function with this class that can be used within string
equations.  The resulting equation does not require the arguments to be
passed in the equation string, as this will be handled automatically.</p>
<dl class="docutils">
<dt>f           –  The callable to register. If this is an Equation</dt>
<dd>instance, then all that needs to be provied is a name.</dd>
<dt>name        –  The name of the function to be used in equations. If</dt>
<dd>this is None (default), the method will try to
determine the name of the function automatically.</dd>
<dt>argnames    –  The names of the arguments to f (list or None).</dt>
<dd>If this is None (default), then the argument names will
be extracted from the function.</dd>
</dl>
<p>Note that name and argnames can be extracted from regular python
functions (of type ‘function’), bound class methods and callable
classes.</p>
<p>Raises TypeError if name or argnames cannot be automatically
extracted.
Raises TypeError if an automatically extracted name is ‘&lt;lambda&gt;’.
Raises ValueError if f is an Equation object and name is None.</p>
<p>Returns the callable Equation object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.registerStringFunction">
<code class="descname">registerStringFunction</code><span class="sig-paren">(</span><em>fstr</em>, <em>name</em>, <em>ns={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.registerStringFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a string function.</p>
<p>This creates a function with this class that can be used within string
equations.  The resulting equation does not require the arguments to be
passed in the function string, as this will be handled automatically.</p>
<p>fstr        –  A string equation to register.
name        –  The name of the function to be used in equations.
ns          –  A dictionary of Parameters, indexed by name, that are</p>
<blockquote>
<div>used in fstr, but not part of the FitRecipe (default
{}).</div></blockquote>
<p>Raises ValueError if ns uses a name that is already used for another
managed object.
Raises ValueError if the function name is the name of another managed
object.</p>
<p>Returns the callable Equation object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.restrain">
<code class="descname">restrain</code><span class="sig-paren">(</span><em>res</em>, <em>lb=-inf</em>, <em>ub=inf</em>, <em>sig=1</em>, <em>scaled=False</em>, <em>ns={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.restrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Restrain an expression to specified bounds</p>
<p>res     –  An equation string or Parameter to restrain.
lb      –  The lower bound on the restraint evaluation (default -inf).
ub      –  The lower bound on the restraint evaluation (default inf).
sig     –  The uncertainty on the bounds (default 1).
scaled  –  A flag indicating if the restraint is scaled (multiplied)</p>
<blockquote>
<div>by the unrestrained point-average chi^2 (chi^2/numpoints)
(default False).</div></blockquote>
<dl class="docutils">
<dt>ns      –  A dictionary of Parameters, indexed by name, that are used</dt>
<dd>in the equation string, but not part of the RecipeOrganizer
(default {}).</dd>
</dl>
<p>The penalty is calculated as
(max(0, lb - val, val - ub)/sig)**2
and val is the value of the calculated equation.  This is multipled by
the average chi^2 if scaled is True.</p>
<p>Raises ValueError if ns uses a name that is already used for a
Parameter.
Raises ValueError if res depends on a Parameter that is not part of
the RecipeOrganizer and that is not defined in ns.</p>
<p>Returns the Restraint object for use with the ‘unrestrain’ method.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.show">
<code class="descname">show</code><span class="sig-paren">(</span><em>pattern=''</em>, <em>textwidth=78</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the configuration hierarchy on the screen.</p>
<p>This will print out a summary of all contained objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pattern</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – Limit output to only those parameters that match this regular
expression (match all by default).</li>
<li><strong>textwidth</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><em>optional</em>) – Trim formatted lines at this text width to avoid folding at
the screen width.  Do not trim when negative or 0.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.unconstrain">
<code class="descname">unconstrain</code><span class="sig-paren">(</span><em>*pars</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.unconstrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Unconstrain a Parameter.</p>
<p>This removes any constraints on a Parameter.</p>
<p><a href="#id3"><span class="problematic" id="id4">*</span></a>pars   –  The names of Parameters or Parameters to unconstrain.</p>
<p>Raises ValueError if the Parameter is not constrained.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.unrestrain">
<code class="descname">unrestrain</code><span class="sig-paren">(</span><em>*ress</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer.unrestrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a Restraint from the RecipeOrganizer.</p>
<dl class="docutils">
<dt><a href="#id5"><span class="problematic" id="id6">*</span></a>ress   –  Restraints returned from the ‘restrain’ method or added</dt>
<dd>with the ‘addRestraint’ method.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="diffpy.srfit.fitbase.recipeorganizer.equationFromString">
<code class="descclassname">diffpy.srfit.fitbase.recipeorganizer.</code><code class="descname">equationFromString</code><span class="sig-paren">(</span><em>eqstr</em>, <em>factory</em>, <em>ns={}</em>, <em>buildargs=False</em>, <em>argclass=&lt;class 'diffpy.srfit.fitbase.parameter.Parameter'&gt;</em>, <em>argkw={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.recipeorganizer.equationFromString" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an equation from a string.</p>
<dl class="docutils">
<dt>eqstr   –  A string representation of the equation. The equation must</dt>
<dd>consist of numpy operators and “known” Parameters. Parameters
are known if they are in ns, or already defined in the factory.</dd>
</dl>
<p>factory –  An EquationFactory instance.
ns      –  A dictionary of Parameters indexed by name that are used</p>
<blockquote>
<div>in the eqstr but not already defined in the factory
(default {}).</div></blockquote>
<dl class="docutils">
<dt>buildargs   –  A flag indicating whether missing Parameters can be created</dt>
<dd>by the Factory (default False). If False, then the a ValueError
will be raised if there are undefined arguments in the eqstr.</dd>
<dt>argclass    –  Class to use when creating new Arguments (default</dt>
<dd>Parameter). The class constructor must accept the ‘name’ key
word.</dd>
<dt>argkw   –  Key word dictionary to pass to the argclass constructor</dt>
<dd>(default {}).</dd>
</dl>
<p>Raises ValueError if ns uses a name that is already defined in the factory.
Raises ValueError if the equation has undefined parameters.</p>
</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.restraint">
<span id="diffpy-srfit-fitbase-restraint-module"></span><h2>diffpy.srfit.fitbase.restraint module<a class="headerlink" href="#module-diffpy.srfit.fitbase.restraint" title="Permalink to this headline">¶</a></h2>
<p>Restraints class.</p>
<p>Restraints are used by RecipeOrganizers to organize restraint equations.
Restraints store an Equation, bounds on its value, and the form of the penalty
function for breaking a restraint. This penalty is added to the residual
equation calculated by a FitRecipe.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.restraint.Restraint">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.restraint.</code><code class="descname">Restraint</code><span class="sig-paren">(</span><em>eq</em>, <em>lb=-inf</em>, <em>ub=inf</em>, <em>sig=1</em>, <em>scaled=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.restraint.Restraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.fitbase.validatable.Validatable" title="diffpy.srfit.fitbase.validatable.Validatable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.validatable.Validatable</span></code></a></p>
<p>Restraint class.</p>
<p>Attributes
eq      –  An equation whose evaluation is compared against the restraint</p>
<blockquote>
<div>bounds.</div></blockquote>
<p>lb      –  The lower bound on the restraint evaluation (default -inf).
ub      –  The lower bound on the restraint evaluation (default inf).
sig     –  The uncertainty on the bounds (default 1).
scaled  –  A flag indicating if the restraint is scaled (multiplied) by</p>
<blockquote>
<div>the unrestrained point-average chi^2 (chi^2/numpoints)
(default False).</div></blockquote>
<p>The penalty is calculated as
(max(0, lb - val, val - ub)/sig)**2
and val is the value of the calculated equation.  This is multipled by the
average chi^2 if scaled is True.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.restraint.Restraint.penalty">
<code class="descname">penalty</code><span class="sig-paren">(</span><em>w=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.restraint.Restraint.penalty" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the penalty of the restraint.</p>
<dl class="docutils">
<dt>w   –  The point-average chi^2 which is optionally used to scale the</dt>
<dd>penalty (default 1.0).</dd>
</dl>
<p>Returns the penalty as a float</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.simplerecipe">
<span id="diffpy-srfit-fitbase-simplerecipe-module"></span><h2>diffpy.srfit.fitbase.simplerecipe module<a class="headerlink" href="#module-diffpy.srfit.fitbase.simplerecipe" title="Permalink to this headline">¶</a></h2>
<p>Simple FitRecipe class that includes a FitContribution and Profile.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.simplerecipe.SimpleRecipe">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.simplerecipe.</code><code class="descname">SimpleRecipe</code><span class="sig-paren">(</span><em>name='fit'</em>, <em>conclass=&lt;class 'diffpy.srfit.fitbase.fitcontribution.FitContribution'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.simplerecipe.SimpleRecipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe" title="diffpy.srfit.fitbase.fitrecipe.FitRecipe"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.fitrecipe.FitRecipe</span></code></a></p>
<p>SimpleRecipe class.</p>
<p>This is a FitRecipe with a built-in Profile (the ‘profile’ attribute) and
FitContribution (the ‘contribution’ attribute). Unique methods from each of
these are exposed through this class to facilitate the creation of a simple
fit recipe.</p>
<p>Attributes
profile         –  The built-in Profile object.
contribution    –  The built-in FitContribution object.
results         –  The built-in FitResults object.
name            –  A name for this FitRecipe.
fithook         –  An object to be called whenever within the residual</p>
<blockquote>
<div>(default FitHook()) that can pass information out of
the system during a refinement.</div></blockquote>
<dl class="docutils">
<dt>_constraints    –  A dictionary of Constraints, indexed by the constrained</dt>
<dd>Parameter. Constraints can be added using the
‘constrain’ method.</dd>
<dt>_oconstraints   –  An ordered list of the constraints from this and all</dt>
<dd>sub-components.</dd>
</dl>
<p>_calculators    –  A managed dictionary of Calculators.
_contributions  –  A managed OrderedDict of FitContributions.
_parameters     –  A managed OrderedDict of parameters (in this case the</p>
<blockquote>
<div>parameters are varied).</div></blockquote>
<p>_parsets        –  A managed dictionary of ParameterSets.
_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</p>
<blockquote>
<div>instance that is used to create constraints and
restraints from string</div></blockquote>
<p>_fixed          –  A set of parameters that are not actually varied.
_restraintlist  –  A list of restraints from this and all sub-components.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ or ‘confine’ methods.</div></blockquote>
<dl class="docutils">
<dt>_ready          –  A flag indicating if all attributes are ready for the</dt>
<dd>calculation.</dd>
</dl>
<p>_tagdict        –  A dictionary of tags to variables.
_weights        –  List of weighing factors for each FitContribution. The</p>
<blockquote>
<div>weights are multiplied by the residual of the
FitContribution when determining the overall residual.</div></blockquote>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.loadParsedData">
<code class="descname">loadParsedData</code><span class="sig-paren">(</span><em>parser</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.loadParsedData" title="Permalink to this definition">¶</a></dt>
<dd><p>Load parsed data from a ProfileParser.</p>
<p>This sets the xobs, yobs, dyobs arrays as well as the metadata.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.loadtxt">
<code class="descname">loadtxt</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.loadtxt" title="Permalink to this definition">¶</a></dt>
<dd><p>Use numpy.loadtxt to load data.</p>
<p>Arguments are passed to numpy.loadtxt.
unpack = True is enforced.
The first two arrays returned by numpy.loadtxt are assumed to be x and
y.  If there is a third array, it is assumed to by dy. Any other arrays
are ignored. These are passed to setObservedProfile.</p>
<p>Raises ValueError if the call to numpy.loadtxt returns fewer than 2
arrays.</p>
<p>Returns the x, y and dy arrays loaded from the file</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.printResults">
<code class="descname">printResults</code><span class="sig-paren">(</span><em>header=''</em>, <em>footer=''</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.printResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Format and print the results.</p>
<p>header  –  A header to add to the output (default “”)
footer  –  A footer to add to the output (default “”)</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.saveResults">
<code class="descname">saveResults</code><span class="sig-paren">(</span><em>filename</em>, <em>header=''</em>, <em>footer=''</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.saveResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Format and save the results.</p>
<p>filename -  Name of the save file.
header  –  A header to add to the output (default “”)
footer  –  A footer to add to the output (default “”)</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.setCalculationPoints">
<code class="descname">setCalculationPoints</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.setCalculationPoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the calculation points.</p>
<p>Arguments
x   –  A non-empty numpy array containing the calculation points. If</p>
<blockquote>
<div>xobs exists, the bounds of x will be limited to its bounds.</div></blockquote>
<p>This will create y and dy on the specified grid if xobs, yobs and
dyobs exist.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.setCalculationRange">
<code class="descname">setCalculationRange</code><span class="sig-paren">(</span><em>xmin=None</em>, <em>xmax=None</em>, <em>dx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.setCalculationRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Set epsilon-inclusive calculation range.</p>
<p>Adhere to the observed <code class="docutils literal notranslate"><span class="pre">xobs</span></code> points when <code class="docutils literal notranslate"><span class="pre">dx</span></code> is the same
as in the data.  <code class="docutils literal notranslate"><span class="pre">xmin</span></code> and <code class="docutils literal notranslate"><span class="pre">xmax</span></code> are clipped at the bounds
of the observed data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmin</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The minimum value of the independent variable.  Keep the
current minimum when not specified.  If specified as “obs”
reset to the minimum observed value.</li>
<li><strong>xmax</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The maximum value of the independent variable.  Keep the
current maximum when not specified.  If specified as “obs”
reset to the maximum observed value.</li>
<li><strong>dx</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The sample spacing in the independent variable.  When different
from the data, resample the <code class="docutils literal notranslate"><span class="pre">x</span></code> as anchored at <code class="docutils literal notranslate"><span class="pre">xmin</span></code>.</li>
<li><strong>that xmin is always inclusive</strong><strong> (</strong><strong>unless clipped</strong><strong>)</strong><strong> xmax is inclusive</strong> (<em>Note</em>) – </li>
<li><strong>it is within the bounds of the observed data.</strong> (<em>if</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#AttributeError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> – If there is no observed data.</li>
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – When xmin &gt; xmax or if dx &lt;= 0.  Also if dx &gt; xmax - xmin.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.setEquation">
<code class="descname">setEquation</code><span class="sig-paren">(</span><em>eqstr</em>, <em>ns={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.setEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the profile equation for the FitContribution.</p>
<p>This sets the equation that will be used when generating the residual.
The equation will be usable within setResidualEquation as “eq”, and it
takes no arguments.</p>
<dl class="docutils">
<dt>eqstr   –  A string representation of the equation. Variables will be</dt>
<dd>extracted from this equation and be given an initial value
of 0.</dd>
<dt>ns      –  A dictionary of Parameters, indexed by name, that are used</dt>
<dd>in the eqstr, but not registered (default {}).</dd>
</dl>
<p>Raises ValueError if ns uses a name that is already used for a
variable.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.setObservedProfile">
<code class="descname">setObservedProfile</code><span class="sig-paren">(</span><em>xobs</em>, <em>yobs</em>, <em>dyobs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.simplerecipe.SimpleRecipe.setObservedProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the observed profile.</p>
<p>Arguments
xobs    –  Numpy array of the independent variable
yobs    –  Numpy array of the observed signal.
dyobs   –  Numpy array of the uncertainty in the observed signal. If</p>
<blockquote>
<div>dyobs is None (default), it will be set to 1 at each
observed xobs.</div></blockquote>
<p>Raises ValueError if len(yobs) != len(xobs)
Raises ValueError if dyobs != None and len(dyobs) != len(xobs)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase.validatable">
<span id="diffpy-srfit-fitbase-validatable-module"></span><h2>diffpy.srfit.fitbase.validatable module<a class="headerlink" href="#module-diffpy.srfit.fitbase.validatable" title="Permalink to this headline">¶</a></h2>
<p>Validatable class.</p>
<p>A Validatable has state that must be validated before a FitRecipe can first
calculate the residual.</p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.validatable.Validatable">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.validatable.</code><code class="descname">Validatable</code><a class="headerlink" href="#diffpy.srfit.fitbase.validatable.Validatable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Validatable class.</p>
<p>A Validatable has state that must be validated by a FitRecipe.</p>
</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.fitbase">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-diffpy.srfit.fitbase" title="Permalink to this headline">¶</a></h2>
<p>The base fitting classes for diffpy.srfit.</p>
<p>This package contains modules and subpackages that are used to define a fit
problem in SrFit. Unaltered, these classes will help set up a fit problem that
can be optimized within a fitting framework or with a standalone optimizer.
They provide the basic framework for defining a forward calculator, and from
that defining a fit problem with data, constraints and restraints. The classes
involved in this collaboration can be tied to a fitting framework at various
levels through inheritance. One can create a fitting problem using the
FitContribution, Profile and FitRecipe classes.</p>
<p>Various code and design taken from Paul Kienzle’s PARK package.
<a class="reference external" href="http://www.reflectometry.org/danse/park.html">http://www.reflectometry.org/danse/park.html</a></p>
<dl class="class">
<dt id="diffpy.srfit.fitbase.Calculator">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.</code><code class="descname">Calculator</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.Calculator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.equation.literals.html#diffpy.srfit.equation.literals.operators.Operator" title="diffpy.srfit.equation.literals.operators.Operator"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.equation.literals.operators.Operator</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.parameterset.ParameterSet" title="diffpy.srfit.fitbase.parameterset.ParameterSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.parameterset.ParameterSet</span></code></a></p>
<p>Base class for calculators.</p>
<p>A Calculator organizes Parameters and has a __call__ method that can
calculate a generic signal.</p>
<p>Attributes
name            –  A name for this organizer.
meta            –  A dictionary of metadata needed by the calculator.
_calculators    –  A managed dictionary of Calculators, indexed by name.
_constraints    –  A set of constrained Parameters. Constraints can be</p>
<blockquote>
<div>added using the ‘constrain’ methods.</div></blockquote>
<p>_parameters     –  A managed OrderedDict of contained Parameters.
_parsets        –  A managed dictionary of ParameterSets.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ or ‘confine’ methods.</div></blockquote>
<dl class="docutils">
<dt>_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</dt>
<dd>instance that is used create Equations from string.</dd>
</dl>
<p>Operator Attributes
args    –  List of Literal arguments
nin     –  Number of inputs (&lt;1 means this is variable)
nout    –  Number of outputs (1)
operation   –  Function that performs the operation, self.__call__
symbol  –  Same as name
_value  –  The value of the Operator.
value   –  Property for ‘getValue’.</p>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<dl class="attribute">
<dt id="diffpy.srfit.fitbase.Calculator.nin">
<code class="descname">nin</code><em class="property"> = -1</em><a class="headerlink" href="#diffpy.srfit.fitbase.Calculator.nin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.Calculator.nout">
<code class="descname">nout</code><em class="property"> = 1</em><a class="headerlink" href="#diffpy.srfit.fitbase.Calculator.nout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.Calculator.operation">
<code class="descname">operation</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.Calculator.operation" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator indicating abstract properties.</p>
<p>Requires that the metaclass is ABCMeta or derived from it.  A
class that has a metaclass derived from ABCMeta cannot be
instantiated unless all of its abstract properties are overridden.
The abstract properties can be called using any of the normal
‘super’ call mechanisms.</p>
<p>Usage:</p>
<blockquote>
<div><dl class="docutils">
<dt>class C:</dt>
<dd><p class="first">__metaclass__ = ABCMeta
&#64;abstractproperty
def my_abstract_property(self):</p>
<blockquote class="last">
<div>…</div></blockquote>
</dd>
</dl>
</div></blockquote>
<p>This defines a read-only property; you can also define a read-write
abstract property using the ‘long’ form of property declaration:</p>
<blockquote>
<div><dl class="docutils">
<dt>class C:</dt>
<dd>__metaclass__ = ABCMeta
def getx(self): …
def setx(self, value): …
x = abstractproperty(getx, setx)</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.Calculator.symbol">
<code class="descname">symbol</code><a class="headerlink" href="#diffpy.srfit.fitbase.Calculator.symbol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.FitContribution">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.</code><code class="descname">FitContribution</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitContribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.fitbase.parameterset.ParameterSet" title="diffpy.srfit.fitbase.parameterset.ParameterSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.parameterset.ParameterSet</span></code></a></p>
<p>FitContribution class.</p>
<p>FitContributions organize an Equation that calculates the signal, and a
Profile that holds the signal. ProfileGenerators and Calculators can be
used as well.  Contraints and Restraints can be created as part of a
FitContribution.</p>
<p>Attributes
name            –  A name for this FitContribution.
profile         –  A Profile that holds the measured (and calculated)</p>
<blockquote>
<div>signal.</div></blockquote>
<p>_calculators    –  A managed dictionary of Calculators, indexed by name.
_constraints    –  A set of constrained Parameters. Constraints can be</p>
<blockquote>
<div>added using the ‘constrain’ methods.</div></blockquote>
<p>_generators     –  A managed dictionary of ProfileGenerators.
_parameters     –  A managed OrderedDict of parameters.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ method.</div></blockquote>
<p>_parsets        –  A managed dictionary of ParameterSets.
_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</p>
<blockquote>
<div>instance that is used to create constraints and
restraints from string</div></blockquote>
<p>_eq             –  The FitContribution equation that will be optimized.
_reseq          –  The residual equation.
_xname          –  Name of the x-variable
_yname          –  Name of the y-variable
_dyname         –  Name of the dy-variable</p>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.FitContribution.addProfileGenerator">
<code class="descname">addProfileGenerator</code><span class="sig-paren">(</span><em>gen</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitContribution.addProfileGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a ProfileGenerator to be used by this FitContribution.</p>
<p>The ProfileGenerator is given a name so that it can be used as part of
the profile equation (see setEquation). This can be different from the
name of the ProfileGenerator used for attribute access.
FitContributions should not share ProfileGenerator instances. Different
ProfileGenerators can share Parameters and ParameterSets, however.</p>
<p>Calling addProfileGenerator sets the profile equation to call the
calculator and if there is not a profile equation already.</p>
<p>gen     –  A ProfileGenerator instance
name    –  A name for the calculator. If name is None (default), then</p>
<blockquote>
<div>the ProfileGenerator’s name attribute will be used.</div></blockquote>
<p>Raises ValueError if the ProfileGenerator has no name.
Raises ValueError if the ProfileGenerator has the same name as some
other managed object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitContribution.evaluate">
<code class="descname">evaluate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitContribution.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the contribution equation and update profile.ycalc.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitContribution.getEquation">
<code class="descname">getEquation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitContribution.getEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get math expression string for the active profile equation.</p>
<p>Return normalized math expression or an empty string if profile
equation has not been set yet.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitContribution.getResidualEquation">
<code class="descname">getResidualEquation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitContribution.getResidualEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get math expression string for the active residual equation.</p>
<p>Return normalized math formula or an empty string if residual
equation has not been configured yet.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitContribution.residual">
<code class="descname">residual</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitContribution.residual" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the residual for this fitcontribution.</p>
<p>When this method is called, it is assumed that all parameters have been
assigned their most current values by the FitRecipe. This will be the
case when being called as part of a FitRecipe refinement.</p>
<p>The residual is by default an array chiv:
chiv = (eq() - self.profile.y) / self.profile.dy
The value that is optimized is dot(chiv, chiv).</p>
<p>The residual equation can be changed with the setResidualEquation
method.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitContribution.setEquation">
<code class="descname">setEquation</code><span class="sig-paren">(</span><em>eqstr</em>, <em>ns={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitContribution.setEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the profile equation for the FitContribution.</p>
<p>This sets the equation that will be used when generating the residual
for this FitContribution.  The equation will be usable within
setResidualEquation as “eq”, and it takes no arguments.</p>
<dl class="docutils">
<dt>eqstr   –  A string representation of the equation. Any Parameter</dt>
<dd>registered by addParameter or setProfile, or function
registered by setCalculator, registerFunction or
registerStringFunction can be can be used in the equation
by name. Other names will be turned into Parameters of this
FitContribution.</dd>
<dt>ns      –  A dictionary of Parameters, indexed by name, that are used</dt>
<dd>in the eqstr, but not registered (default {}).</dd>
</dl>
<p>Raises ValueError if ns uses a name that is already used for a
variable.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitContribution.setProfile">
<code class="descname">setProfile</code><span class="sig-paren">(</span><em>profile</em>, <em>xname=None</em>, <em>yname=None</em>, <em>dyname=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitContribution.setProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the Profile for this FitContribution.</p>
<dl class="docutils">
<dt>profile –  A Profile that specifies the calculation points and that</dt>
<dd>will store the calculated signal.</dd>
<dt>xname   –  The name of the independent variable from the Profile. If</dt>
<dd>this is None (default), then the name specified by the
Profile for this parameter will be used.  This variable is
usable within string equations with the specified name.</dd>
<dt>yname   –  The name of the observed Profile.  If this is None</dt>
<dd>(default), then the name specified by the Profile for this
parameter will be used.  This variable is usable within
string equations with the specified name.</dd>
<dt>dyname  –  The name of the uncertainty in the observed Profile. If</dt>
<dd>this is None (default), then the name specified by the
Profile for this parameter will be used.  This variable is
usable within string equations with the specified name.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitContribution.setResidualEquation">
<code class="descname">setResidualEquation</code><span class="sig-paren">(</span><em>eqstr</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitContribution.setResidualEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the residual equation for the FitContribution.</p>
<dl class="docutils">
<dt>eqstr   –  A string representation of the residual. If eqstr is None</dt>
<dd>(default), then the previous residual equation will be
used, or the chi2 residual will be used if that does not
exist.</dd>
</dl>
<p>Two residuals are preset for convenience, “chiv” and “resv”.
chiv is defined such that dot(chiv, chiv) = chi^2.
resv is defined such that dot(resv, resv) = Rw^2.
You can call on these in your residual equation. Note that the quantity
that will be optimized is the summed square of the residual equation.
Keep that in mind when defining a new residual or using the built-in
ones.</p>
<p>Raises SrFitError if the Profile is not yet defined.
Raises ValueError if eqstr depends on a Parameter that is not part of
the FitContribution.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.FitHook">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.</code><code class="descname">FitHook</code><a class="headerlink" href="#diffpy.srfit.fitbase.FitHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for inspecting the progress of a FitRecipe refinement.</p>
<p>Can serve as a fithook for the FitRecipe class (see FitRecipe.pushFitHook
method.) The methods in this class are called during the preparation of the
FitRecipe for refinement, and during the residual call. See the class
methods for a description of their purpose.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.FitHook.postcall">
<code class="descname">postcall</code><span class="sig-paren">(</span><em>recipe</em>, <em>chiv</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitHook.postcall" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called within FitRecipe.residual, after the calculation.</p>
<p>recipe  –  The FitRecipe instance
chiv    –  The residual vector</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitHook.precall">
<code class="descname">precall</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitHook.precall" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called within FitRecipe.residual, before the calculation.</p>
<p>recipe  –  The FitRecipe instance</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitHook.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitHook.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the hook data.</p>
<p>This is called whenever FitRecipe._prepare is called, which is whenever
a configurational change to the fit hierarchy takes place, such as
adding a new ParameterSet, constraint or restraint.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.FitRecipe">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.</code><code class="descname">FitRecipe</code><span class="sig-paren">(</span><em>name='fit'</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.interface.html#diffpy.srfit.interface.interface.FitRecipeInterface" title="diffpy.srfit.interface.interface.FitRecipeInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.interface.interface.FitRecipeInterface</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer" title="diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.recipeorganizer.RecipeOrganizer</span></code></a></p>
<p>FitRecipe class.</p>
<p>Attributes
name            –  A name for this FitRecipe.
fithooks        –  List of FitHook instances that can pass information out</p>
<blockquote>
<div>of the system during a refinement. By default, the is
populated by a PrintFitHook instance.</div></blockquote>
<dl class="docutils">
<dt>_constraints    –  A dictionary of Constraints, indexed by the constrained</dt>
<dd>Parameter. Constraints can be added using the
‘constrain’ method.</dd>
<dt>_oconstraints   –  An ordered list of the constraints from this and all</dt>
<dd>sub-components.</dd>
</dl>
<p>_calculators    –  A managed dictionary of Calculators.
_contributions  –  A managed OrderedDict of FitContributions.
_parameters     –  A managed OrderedDict of parameters (in this case the</p>
<blockquote>
<div>parameters are varied).</div></blockquote>
<p>_parsets        –  A managed dictionary of ParameterSets.
_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</p>
<blockquote>
<div>instance that is used to create constraints and
restraints from string</div></blockquote>
<p>_restraintlist  –  A list of restraints from this and all sub-components.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ or ‘confine’ methods.</div></blockquote>
<dl class="docutils">
<dt>_ready          –  A flag indicating if all attributes are ready for the</dt>
<dd>calculation.</dd>
</dl>
<p>_tagmanager     –  A TagManager instance for managing tags on Parameters.
_weights        –  List of weighing factors for each FitContribution. The</p>
<blockquote>
<div>weights are multiplied by the residual of the
FitContribution when determining the overall residual.</div></blockquote>
<dl class="docutils">
<dt>_fixedtag       –  “__fixed”, used for tagging variables as fixed. Don’t</dt>
<dd>use this tag unless you want issues.</dd>
</dl>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.
fixednames      –  Names of the fixed refinable variables (read only).
fixedvalues     –  Values of the fixed refinable variables (read only).
bounds          –  Bounds on parameters (read only). See getBounds.
bounds2         –  Bounds on parameters (read only). See getBounds2.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.addContribution">
<code class="descname">addContribution</code><span class="sig-paren">(</span><em>con</em>, <em>weight=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.addContribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a FitContribution to the FitRecipe.</p>
<p>con     –  The FitContribution to be stored.</p>
<p>Raises ValueError if the FitContribution has no name
Raises ValueError if the FitContribution has the same name as some
other managed object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.addParameterSet">
<code class="descname">addParameterSet</code><span class="sig-paren">(</span><em>parset</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.addParameterSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a ParameterSet to the hierarchy.</p>
<p>parset  –  The ParameterSet to be stored.</p>
<p>Raises ValueError if the ParameterSet has no name.
Raises ValueError if the ParameterSet has the same name as some other
managed object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.addVar">
<code class="descname">addVar</code><span class="sig-paren">(</span><em>par</em>, <em>value=None</em>, <em>name=None</em>, <em>fixed=False</em>, <em>tag=None</em>, <em>tags=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.addVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a variable to be refined.</p>
<p>par     –  A Parameter that will be varied during a fit.
value   –  An initial value for the variable. If this is None</p>
<blockquote>
<div>(default), then the current value of par will be used.</div></blockquote>
<dl class="docutils">
<dt>name    –  A name for this variable. If name is None (default), then</dt>
<dd>the name of the parameter will be used.</dd>
</dl>
<p>fixed   –  Fix the variable so that it does not vary (default False).
tag     –  A tag for the variable. This can be used to retrieve, fix</p>
<blockquote>
<div>or free variables by tag (default None). Note that a
variable is automatically tagged with its name and “all”.</div></blockquote>
<dl class="docutils">
<dt>tags    –  A list of tags (default []). Both tag and tags can be</dt>
<dd>applied.</dd>
</dl>
<p>Returns the ParameterProxy (variable) for the passed Parameter.</p>
<p>Raises ValueError if the name of the variable is already taken by
another managed object.
Raises ValueError if par is constant.
Raises ValueError if par is constrained.</p>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.FitRecipe.bounds">
<code class="descname">bounds</code><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.bounds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.FitRecipe.bounds2">
<code class="descname">bounds2</code><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.bounds2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.boundsToRestraints">
<code class="descname">boundsToRestraints</code><span class="sig-paren">(</span><em>sig=1</em>, <em>scaled=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.boundsToRestraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn all bounded parameters into restraints.</p>
<p>The bounds become limits on the restraint.</p>
<dl class="docutils">
<dt>sig     –  The uncertainty on the bounds (scalar or iterable,</dt>
<dd>default 1).</dd>
</dl>
<p>scaled  –  Scale the restraints, see restrain.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.clearFitHooks">
<code class="descname">clearFitHooks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.clearFitHooks" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the FitHook sequence.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.constrain">
<code class="descname">constrain</code><span class="sig-paren">(</span><em>par</em>, <em>con</em>, <em>ns={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.constrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Constrain a parameter to an equation.</p>
<p>Note that only one constraint can exist on a Parameter at a time.</p>
<p>This is overloaded to set the value of con if it represents a variable
and its current value is None. A constrained variable will be set as
fixed.</p>
<p>par     –  The Parameter to constrain.
con     –  A string representation of the constraint equation or a</p>
<blockquote>
<div>Parameter to constrain to.  A constraint equation must
consist of numpy operators and “known” Parameters.
Parameters are known if they are in the ns argument, or if
they are managed by this object.</div></blockquote>
<dl class="docutils">
<dt>ns      –  A dictionary of Parameters, indexed by name, that are used</dt>
<dd>in the eqstr, but not part of this object (default {}).</dd>
</dl>
<p>Raises ValueError if ns uses a name that is already used for a
variable.
Raises ValueError if eqstr depends on a Parameter that is not part of
the FitRecipe and that is not defined in ns.
Raises ValueError if par is marked as constant.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.delVar">
<code class="descname">delVar</code><span class="sig-paren">(</span><em>var</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.delVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a variable.</p>
<p>Note that constraints and restraints involving the variable are not
modified.</p>
<p>var     –  A variable of the FitRecipe.</p>
<p>Raises ValueError if var is not part of the FitRecipe.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.fix">
<code class="descname">fix</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.fix" title="Permalink to this definition">¶</a></dt>
<dd><p>Fix a parameter by reference, name or tag.</p>
<p>A fixed variable is not refined.  Variables are free by default.</p>
<p>This method accepts string or variable arguments. An argument of “all”
selects all variables. Keyword arguments must be parameter names,
followed by a value to assign to the fixed variable.</p>
<p>Raises ValueError if an unknown Parameter, name or tag is passed, or if
a tag is passed in a keyword.</p>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.FitRecipe.fixednames">
<code class="descname">fixednames</code><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.fixednames" title="Permalink to this definition">¶</a></dt>
<dd><p>names of the fixed refinable variables</p>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.FitRecipe.fixedvalues">
<code class="descname">fixedvalues</code><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.fixedvalues" title="Permalink to this definition">¶</a></dt>
<dd><p>values of the fixed refinable variables</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.free">
<code class="descname">free</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.free" title="Permalink to this definition">¶</a></dt>
<dd><p>Free a parameter by reference, name or tag.</p>
<p>A free variable is refined.  Variables are free by default. Constrained
variables are not free.</p>
<p>This method accepts string or variable arguments. An argument of “all”
selects all variables. Keyword arguments must be parameter names,
followed by a value to assign to the fixed variable.</p>
<p>Raises ValueError if an unknown Parameter, name or tag is passed, or if
a tag is passed in a keyword.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.getBounds">
<code class="descname">getBounds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.getBounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the bounds on variables in a list.</p>
<p>Returns a list of (lb, ub) pairs, where lb is the lower bound and ub is
the upper bound.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.getBounds2">
<code class="descname">getBounds2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.getBounds2" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the bounds on variables in two lists.</p>
<p>Returns lower- and upper-bound lists of variable bounds.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.getFitHooks">
<code class="descname">getFitHooks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.getFitHooks" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the sequence of FitHook instances.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.getNames">
<code class="descname">getNames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.getNames" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the names of the variables in a list.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.getValues">
<code class="descname">getValues</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.getValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current values of the variables in a list.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.isFree">
<code class="descname">isFree</code><span class="sig-paren">(</span><em>var</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.isFree" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a variable is fixed.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.newVar">
<code class="descname">newVar</code><span class="sig-paren">(</span><em>name</em>, <em>value=None</em>, <em>fixed=False</em>, <em>tag=None</em>, <em>tags=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.newVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new variable of the fit.</p>
<p>This method lets new variables be created that are not tied to a
Parameter.  Orphan variables may cause a fit to fail, depending on the
optimization routine, and therefore should only be created to be used
in contraint or restraint equations.</p>
<dl class="docutils">
<dt>name    –  The name of the variable. The variable will be able to be</dt>
<dd>used by this name in restraint and constraint equations.</dd>
<dt>value   –  An initial value for the variable. If this is None</dt>
<dd>(default), then the variable will be given the value of the
first non-None-valued Parameter constrained to it. If this
fails, an error will be thrown when ‘residual’ is called.</dd>
<dt>fixed   –  Fix the variable so that it does not vary (default False).</dt>
<dd>The variable will still be managed by the FitRecipe.</dd>
<dt>tag     –  A tag for the variable. This can be used to fix and free</dt>
<dd>variables by tag (default None). Note that a variable is
automatically tagged with its name and “all”.</dd>
<dt>tags    –  A list of tags (default []). Both tag and tags can be</dt>
<dd>applied.</dd>
</dl>
<p>Returns the new variable (Parameter instance).</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.popFitHook">
<code class="descname">popFitHook</code><span class="sig-paren">(</span><em>fithook=None</em>, <em>index=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.popFitHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a FitHook by index or reference.</p>
<dl class="docutils">
<dt>fithook –  FitHook instance to remove from the sequence. If this is</dt>
<dd>None (default), default to index.</dd>
</dl>
<p>index   –  Index of FitHook instance to remove (default -1).</p>
<p>Raises ValueError if fithook is not None, but is not present in the
sequence.
Raises IndexError if the sequence is empty or index is out of range.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.pushFitHook">
<code class="descname">pushFitHook</code><span class="sig-paren">(</span><em>fithook</em>, <em>index=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.pushFitHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a FitHook to be called within the residual method.</p>
<p>The hook is an object for reporting updates, or more fundamentally,
passing information out of the system during a refinement. See the
diffpy.srfit.fitbase.fithook.FitHook class for the required interface.
Added FitHooks will be called sequentially during refinement.</p>
<p>fithook –  FitHook instance to add to the sequence
index   –  Index for inserting fithook into the list of fit hooks.  If</p>
<blockquote>
<div>this is None (default), the fithook is added to the end.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.removeParameterSet">
<code class="descname">removeParameterSet</code><span class="sig-paren">(</span><em>parset</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.removeParameterSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a ParameterSet from the hierarchy.</p>
<p>Raises ValueError if parset is not managed by this object.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.residual">
<code class="descname">residual</code><span class="sig-paren">(</span><em>p=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.residual" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the vector residual to be optimized.</p>
<p>Arguments
p   –  The list of current variable values, provided in the same order</p>
<blockquote>
<div>as the ‘_parameters’ list. If p is an empty iterable (default),
then it is assumed that the parameters have already been
updated in some other way, and the explicit update within this
function is skipped.</div></blockquote>
<p>The residual is by default the weighted concatenation of each
FitContribution’s residual, plus the value of each restraint. The array
returned, denoted chiv, is such that
dot(chiv, chiv) = chi^2 + restraints.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.scalarResidual">
<code class="descname">scalarResidual</code><span class="sig-paren">(</span><em>p=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.scalarResidual" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the scalar residual to be optimized.</p>
<p>Arguments
p   –  The list of current variable values, provided in the same order</p>
<blockquote>
<div>as the ‘_parameters’ list. If p is an empty iterable (default),
then it is assumed that the parameters have already been
updated in some other way, and the explicit update within this
function is skipped.</div></blockquote>
<p>The residual is by default the weighted concatenation of each
FitContribution’s residual, plus the value of each restraint. The array
returned, denoted chiv, is such that
dot(chiv, chiv) = chi^2 + restraints.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.setWeight">
<code class="descname">setWeight</code><span class="sig-paren">(</span><em>con</em>, <em>weight</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.setWeight" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the weight of a FitContribution.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitRecipe.unconstrain">
<code class="descname">unconstrain</code><span class="sig-paren">(</span><em>*pars</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitRecipe.unconstrain" title="Permalink to this definition">¶</a></dt>
<dd><p>Unconstrain a Parameter.</p>
<p>This removes any constraints on a Parameter. If the Parameter is also a
variable of the recipe, it will be freed as well.</p>
<p><a href="#id7"><span class="problematic" id="id8">*</span></a>pars   –  The names of Parameters or Parameters to unconstrain.</p>
<p>Raises ValueError if the Parameter is not constrained.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.FitResults">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.</code><code class="descname">FitResults</code><span class="sig-paren">(</span><em>recipe</em>, <em>update=True</em>, <em>showfixed=True</em>, <em>showcon=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class for processing, presenting and storing results of a fit.</p>
<p>Attributes
recipe      –  The recipe containing the results.
cov         –  The covariance matrix from the recipe.
conresults  –  An ordered dictionary of ContributionResults for each</p>
<blockquote>
<div>FitContribution, indexed by the FitContribution name.</div></blockquote>
<dl class="docutils">
<dt>derivstep   –  The fractional step size for calculating numeric</dt>
<dd>derivatives. Default 1e-8.</dd>
</dl>
<p>varnames    –  Names of the variables in the recipe.
varvals     –  Values of the variables in the recipe.
varunc      –  Uncertainties in the variable values.
showfixed   –  Show fixed variables (default True).
fixednames  –  Names of the fixed variables of the recipe.
fixedvals   –  Values of the fixed variables of the recipe.
showcon     –  Show constraint values in the output (default False).
connames    –  Names of the constrained parameters.
convals     –  Values of the constrained parameters.
conunc      –  Uncertainties in the constraint values.
residual    –  The scalar residual of the recipe.
penalty     –  The penalty to residual from the restraints.
chi2        –  The chi2 of the recipe.
cumchi2     –  The cumulative chi2 of the recipe.
rchi2       –  The reduced chi2 of the recipe.
rw          –  The Rw of the recipe.
cumrw       –  The cumulative Rw of the recipe.
messages    –  A list of messages about the results.
precision   –  The precision of numeric output (default 8).
_dcon       –  The derivatives of the constraint equations with respect to</p>
<blockquote>
<div>the variables. This is used internally.</div></blockquote>
<p>Each of these attributes, except the recipe, are created or updated when
the update method is called.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.FitResults.formatResults">
<code class="descname">formatResults</code><span class="sig-paren">(</span><em>header=''</em>, <em>footer=''</em>, <em>update=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitResults.formatResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the results and return them in a string.</p>
<p>This function is called by printResults and saveResults. Overloading
the formatting here will change all three functions.</p>
<p>header  –  A header to add to the output (default “”)
footer  –  A footer to add to the output (default “”)
update  –  Flag indicating whether to call update() (default False).</p>
<p>Returns a string containing the formatted results.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitResults.printResults">
<code class="descname">printResults</code><span class="sig-paren">(</span><em>header=''</em>, <em>footer=''</em>, <em>update=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitResults.printResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Format and print the results.</p>
<p>header  –  A header to add to the output (default “”)
footer  –  A footer to add to the output (default “”)
update  –  Flag indicating whether to call update() (default False).</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitResults.saveResults">
<code class="descname">saveResults</code><span class="sig-paren">(</span><em>filename</em>, <em>header=''</em>, <em>footer=''</em>, <em>update=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitResults.saveResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Format and save the results.</p>
<p>filename -  Name of the save file.
header  –  A header to add to the output (default “”)
footer  –  A footer to add to the output (default “”)
update  –  Flag indicating whether to call update() (default False).</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.FitResults.update">
<code class="descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.FitResults.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the results according to the current state of the recipe.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="diffpy.srfit.fitbase.initializeRecipe">
<code class="descclassname">diffpy.srfit.fitbase.</code><code class="descname">initializeRecipe</code><span class="sig-paren">(</span><em>recipe</em>, <em>results</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.initializeRecipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the variables of a recipe from a results file.</p>
<p>This reads the results from file and initializes any variables (fixed or
free) in the recipe to the results values. Note that the recipe has to be
configured, with variables. This does not reconstruct a FitRecipe.</p>
<p>recipe  –  A configured recipe with variables
results –  An open file-like object, name of a file that contains</p>
<blockquote>
<div>results from FitResults or a string containing fit results.</div></blockquote>
</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.PlotFitHook">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.</code><code class="descname">PlotFitHook</code><a class="headerlink" href="#diffpy.srfit.fitbase.PlotFitHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.fitbase.fithook.FitHook" title="diffpy.srfit.fitbase.fithook.FitHook"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.fithook.FitHook</span></code></a></p>
<p>This FitHook has live plotting of whatever is being refined.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.PlotFitHook.postcall">
<code class="descname">postcall</code><span class="sig-paren">(</span><em>recipe</em>, <em>chiv</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.PlotFitHook.postcall" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called within FitRecipe.residual, after the calculation.</p>
<p>Find data and plot it.</p>
<p>recipe  –  The FitRecipe instance
chiv    –  The residual vector</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.PlotFitHook.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.PlotFitHook.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the plot.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.Profile">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.</code><code class="descname">Profile</code><a class="headerlink" href="#diffpy.srfit.fitbase.Profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.util.html#diffpy.srfit.util.observable.Observable" title="diffpy.srfit.util.observable.Observable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.util.observable.Observable</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.validatable.Validatable" title="diffpy.srfit.fitbase.validatable.Validatable"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.validatable.Validatable</span></code></a></p>
<p>Observed and calculated profile container.</p>
<p>Profile is an Observable. The xpar, ypar and dypar attributes are observed
by the Profile, which can in turn be observed by some other object.</p>
<p>Attributes</p>
<dl class="docutils">
<dt>_xobs   –  A numpy array of the observed independent variable (default</dt>
<dd>None)</dd>
</dl>
<p>xobs    –  Read-only property of _xobs.
_yobs   –  A numpy array of the observed signal (default None)
yobs    –  Read-only property of _yobs.
_dyobs  –  A numpy array of the uncertainty of the observed signal (default</p>
<blockquote>
<div>None, optional).</div></blockquote>
<p>dyobs   –  Read-only property of _dyobs.
x       –  A numpy array of the calculated independent variable (default</p>
<blockquote>
<div>None, property for xpar accessors).</div></blockquote>
<dl class="docutils">
<dt>y       –  The profile over the calculation range (default None, property</dt>
<dd>for ypar accessors).</dd>
<dt>dy      –  The uncertainty in the profile over the calculation range</dt>
<dd>(default None, property for dypar accessors).</dd>
</dl>
<p>ycalc   –  A numpy array of the calculated signal (default None).
xpar    –  A Parameter that stores x (named “x”).
ypar    –  A Parameter that stores y (named “y”).
dypar   –  A Parameter that stores dy (named “dy”).
ycpar   –  A Parameter that stores ycalc (named “ycalc”). This is</p>
<blockquote>
<div>not observed by the profile, but it is present so it can be
constrained to.</div></blockquote>
<dl class="docutils">
<dt>meta    –  A dictionary of metadata. This is only set if provided by a</dt>
<dd>parser.</dd>
</dl>
<dl class="attribute">
<dt id="diffpy.srfit.fitbase.Profile.dy">
<code class="descname">dy</code><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.dy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.Profile.dyobs">
<code class="descname">dyobs</code><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.dyobs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.Profile.loadParsedData">
<code class="descname">loadParsedData</code><span class="sig-paren">(</span><em>parser</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.loadParsedData" title="Permalink to this definition">¶</a></dt>
<dd><p>Load parsed data from a ProfileParser.</p>
<p>This sets the xobs, yobs, dyobs arrays as well as the metadata.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.Profile.loadtxt">
<code class="descname">loadtxt</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.loadtxt" title="Permalink to this definition">¶</a></dt>
<dd><p>Use numpy.loadtxt to load data.</p>
<p>Arguments are passed to numpy.loadtxt.
unpack = True is enforced.
The first two arrays returned by numpy.loadtxt are assumed to be x and
y.  If there is a third array, it is assumed to by dy. Any other arrays
are ignored. These are passed to setObservedProfile.</p>
<p>Raises ValueError if the call to numpy.loadtxt returns fewer than 2
arrays.</p>
<p>Returns the x, y and dy arrays loaded from the file</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.Profile.savetxt">
<code class="descname">savetxt</code><span class="sig-paren">(</span><em>fname</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.savetxt" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <cite>numpy.savetxt</cite> with x, ycalc, y, dy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fname</strong> (<em>filename</em><em> or </em><em>file handle</em>) – This is passed to <cite>numpy.savetxt</cite>.</li>
<li><strong>**kwargs</strong> – The keyword arguments that are passed to <cite>numpy.savetxt</cite>.
We preset file header “x  ycalc  y  dy”.  Use <code class="docutils literal notranslate"><span class="pre">header=''</span></code>
to save data without any header.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SrFitError</span></code> – When <cite>self.ycalc</cite> has not been set.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">numpy.savetxt()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.Profile.setCalculationPoints">
<code class="descname">setCalculationPoints</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.setCalculationPoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the calculation points.</p>
<p>Arguments
x   –  A non-empty numpy array containing the calculation points. If</p>
<blockquote>
<div>xobs exists, the bounds of x will be limited to its bounds.</div></blockquote>
<p>This will create y and dy on the specified grid if xobs, yobs and
dyobs exist.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.Profile.setCalculationRange">
<code class="descname">setCalculationRange</code><span class="sig-paren">(</span><em>xmin=None</em>, <em>xmax=None</em>, <em>dx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.setCalculationRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Set epsilon-inclusive calculation range.</p>
<p>Adhere to the observed <code class="docutils literal notranslate"><span class="pre">xobs</span></code> points when <code class="docutils literal notranslate"><span class="pre">dx</span></code> is the same
as in the data.  <code class="docutils literal notranslate"><span class="pre">xmin</span></code> and <code class="docutils literal notranslate"><span class="pre">xmax</span></code> are clipped at the bounds
of the observed data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmin</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The minimum value of the independent variable.  Keep the
current minimum when not specified.  If specified as “obs”
reset to the minimum observed value.</li>
<li><strong>xmax</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The maximum value of the independent variable.  Keep the
current maximum when not specified.  If specified as “obs”
reset to the maximum observed value.</li>
<li><strong>dx</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The sample spacing in the independent variable.  When different
from the data, resample the <code class="docutils literal notranslate"><span class="pre">x</span></code> as anchored at <code class="docutils literal notranslate"><span class="pre">xmin</span></code>.</li>
<li><strong>that xmin is always inclusive</strong><strong> (</strong><strong>unless clipped</strong><strong>)</strong><strong> xmax is inclusive</strong> (<em>Note</em>) – </li>
<li><strong>it is within the bounds of the observed data.</strong> (<em>if</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#AttributeError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> – If there is no observed data.</li>
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – When xmin &gt; xmax or if dx &lt;= 0.  Also if dx &gt; xmax - xmin.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.Profile.setObservedProfile">
<code class="descname">setObservedProfile</code><span class="sig-paren">(</span><em>xobs</em>, <em>yobs</em>, <em>dyobs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.setObservedProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the observed profile.</p>
<p>Arguments
xobs    –  Numpy array of the independent variable
yobs    –  Numpy array of the observed signal.
dyobs   –  Numpy array of the uncertainty in the observed signal. If</p>
<blockquote>
<div>dyobs is None (default), it will be set to 1 at each
observed xobs.</div></blockquote>
<p>Raises ValueError if len(yobs) != len(xobs)
Raises ValueError if dyobs != None and len(dyobs) != len(xobs)</p>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.Profile.x">
<code class="descname">x</code><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.x" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.Profile.xobs">
<code class="descname">xobs</code><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.xobs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.Profile.y">
<code class="descname">y</code><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.y" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.Profile.ycalc">
<code class="descname">ycalc</code><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.ycalc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.Profile.yobs">
<code class="descname">yobs</code><a class="headerlink" href="#diffpy.srfit.fitbase.Profile.yobs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.ProfileGenerator">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.</code><code class="descname">ProfileGenerator</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.ProfileGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.equation.literals.html#diffpy.srfit.equation.literals.operators.Operator" title="diffpy.srfit.equation.literals.operators.Operator"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.equation.literals.operators.Operator</span></code></a>, <a class="reference internal" href="#diffpy.srfit.fitbase.parameterset.ParameterSet" title="diffpy.srfit.fitbase.parameterset.ParameterSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.parameterset.ParameterSet</span></code></a></p>
<p>Base class for profile generators.</p>
<p>A ProfileGenerator organizes Parameters and has a __call__ method that can
generate a profile. ProfileGenerator is also an Operator
(diffpy.srfit.equation.literals.operators), so it can be used directly in
an evaluation network.</p>
<p>Attributes
name            –  A name for this organizer.
profile         –  A Profile instance that contains the calculation range</p>
<blockquote>
<div>and will contain the generated profile.</div></blockquote>
<p>meta            –  A dictionary of metadata needed by the generator.
eq              –  The Equation object used to wrap this ProfileGenerator.</p>
<blockquote>
<div>This is set when the ProfileGenerator is added to a
FitContribution.</div></blockquote>
<p>_calculators    –  A managed dictionary of Calculators, indexed by name.
_constraints    –  A set of constrained Parameters. Constraints can be</p>
<blockquote>
<div>added using the ‘constrain’ methods.</div></blockquote>
<p>_parameters     –  A managed OrderedDict of contained Parameters.
_parsets        –  A managed dictionary of ParameterSets.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ or ‘confine’ methods.</div></blockquote>
<dl class="docutils">
<dt>_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</dt>
<dd>instance that is used create Equations from string.</dd>
</dl>
<p>Operator Attributes
args    –  List of Literal arguments, set with ‘addLiteral’
name    –  A name for this operator. e.g. “add” or “sin”
nin     –  Number of inputs (&lt;1 means this is variable)
nout    –  Number of outputs
operation   –  Function that performs the operation. e.g. numpy.add. In</p>
<blockquote>
<div>this case, operation is an instance method.</div></blockquote>
<p>symbol  –  The symbolic representation. e.g. “+” or “sin”
_value  –  The value of the Operator.
value   –  Property for ‘getValue’.</p>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<dl class="attribute">
<dt id="diffpy.srfit.fitbase.ProfileGenerator.nin">
<code class="descname">nin</code><em class="property"> = 0</em><a class="headerlink" href="#diffpy.srfit.fitbase.ProfileGenerator.nin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.ProfileGenerator.nout">
<code class="descname">nout</code><em class="property"> = 1</em><a class="headerlink" href="#diffpy.srfit.fitbase.ProfileGenerator.nout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.ProfileGenerator.operation">
<code class="descname">operation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.ProfileGenerator.operation" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the profile.</p>
<p>Return the result of __call__(profile.x).</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.ProfileGenerator.processMetaData">
<code class="descname">processMetaData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.ProfileGenerator.processMetaData" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the metadata.</p>
<p>This can be used to configure a ProfileGenerator upon a change in the
metadata. This method gets called whenever the Profile is set.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.ProfileGenerator.setProfile">
<code class="descname">setProfile</code><span class="sig-paren">(</span><em>profile</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.ProfileGenerator.setProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the profile.</p>
<dl class="docutils">
<dt>profile –  A Profile that specifies the calculation points and which</dt>
<dd>will store the calculated signal.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="diffpy.srfit.fitbase.ProfileGenerator.symbol">
<code class="descname">symbol</code><a class="headerlink" href="#diffpy.srfit.fitbase.ProfileGenerator.symbol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.fitbase.SimpleRecipe">
<em class="property">class </em><code class="descclassname">diffpy.srfit.fitbase.</code><code class="descname">SimpleRecipe</code><span class="sig-paren">(</span><em>name='fit'</em>, <em>conclass=&lt;class 'diffpy.srfit.fitbase.fitcontribution.FitContribution'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.SimpleRecipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.fitbase.fitrecipe.FitRecipe" title="diffpy.srfit.fitbase.fitrecipe.FitRecipe"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.fitrecipe.FitRecipe</span></code></a></p>
<p>SimpleRecipe class.</p>
<p>This is a FitRecipe with a built-in Profile (the ‘profile’ attribute) and
FitContribution (the ‘contribution’ attribute). Unique methods from each of
these are exposed through this class to facilitate the creation of a simple
fit recipe.</p>
<p>Attributes
profile         –  The built-in Profile object.
contribution    –  The built-in FitContribution object.
results         –  The built-in FitResults object.
name            –  A name for this FitRecipe.
fithook         –  An object to be called whenever within the residual</p>
<blockquote>
<div>(default FitHook()) that can pass information out of
the system during a refinement.</div></blockquote>
<dl class="docutils">
<dt>_constraints    –  A dictionary of Constraints, indexed by the constrained</dt>
<dd>Parameter. Constraints can be added using the
‘constrain’ method.</dd>
<dt>_oconstraints   –  An ordered list of the constraints from this and all</dt>
<dd>sub-components.</dd>
</dl>
<p>_calculators    –  A managed dictionary of Calculators.
_contributions  –  A managed OrderedDict of FitContributions.
_parameters     –  A managed OrderedDict of parameters (in this case the</p>
<blockquote>
<div>parameters are varied).</div></blockquote>
<p>_parsets        –  A managed dictionary of ParameterSets.
_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</p>
<blockquote>
<div>instance that is used to create constraints and
restraints from string</div></blockquote>
<p>_fixed          –  A set of parameters that are not actually varied.
_restraintlist  –  A list of restraints from this and all sub-components.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ or ‘confine’ methods.</div></blockquote>
<dl class="docutils">
<dt>_ready          –  A flag indicating if all attributes are ready for the</dt>
<dd>calculation.</dd>
</dl>
<p>_tagdict        –  A dictionary of tags to variables.
_weights        –  List of weighing factors for each FitContribution. The</p>
<blockquote>
<div>weights are multiplied by the residual of the
FitContribution when determining the overall residual.</div></blockquote>
<p>Properties
names           –  Variable names (read only). See getNames.
values          –  Variable values (read only). See getValues.</p>
<dl class="method">
<dt id="diffpy.srfit.fitbase.SimpleRecipe.loadParsedData">
<code class="descname">loadParsedData</code><span class="sig-paren">(</span><em>parser</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.SimpleRecipe.loadParsedData" title="Permalink to this definition">¶</a></dt>
<dd><p>Load parsed data from a ProfileParser.</p>
<p>This sets the xobs, yobs, dyobs arrays as well as the metadata.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.SimpleRecipe.loadtxt">
<code class="descname">loadtxt</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.SimpleRecipe.loadtxt" title="Permalink to this definition">¶</a></dt>
<dd><p>Use numpy.loadtxt to load data.</p>
<p>Arguments are passed to numpy.loadtxt.
unpack = True is enforced.
The first two arrays returned by numpy.loadtxt are assumed to be x and
y.  If there is a third array, it is assumed to by dy. Any other arrays
are ignored. These are passed to setObservedProfile.</p>
<p>Raises ValueError if the call to numpy.loadtxt returns fewer than 2
arrays.</p>
<p>Returns the x, y and dy arrays loaded from the file</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.SimpleRecipe.printResults">
<code class="descname">printResults</code><span class="sig-paren">(</span><em>header=''</em>, <em>footer=''</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.SimpleRecipe.printResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Format and print the results.</p>
<p>header  –  A header to add to the output (default “”)
footer  –  A footer to add to the output (default “”)</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.SimpleRecipe.saveResults">
<code class="descname">saveResults</code><span class="sig-paren">(</span><em>filename</em>, <em>header=''</em>, <em>footer=''</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.SimpleRecipe.saveResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Format and save the results.</p>
<p>filename -  Name of the save file.
header  –  A header to add to the output (default “”)
footer  –  A footer to add to the output (default “”)</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.SimpleRecipe.setCalculationPoints">
<code class="descname">setCalculationPoints</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.SimpleRecipe.setCalculationPoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the calculation points.</p>
<p>Arguments
x   –  A non-empty numpy array containing the calculation points. If</p>
<blockquote>
<div>xobs exists, the bounds of x will be limited to its bounds.</div></blockquote>
<p>This will create y and dy on the specified grid if xobs, yobs and
dyobs exist.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.SimpleRecipe.setCalculationRange">
<code class="descname">setCalculationRange</code><span class="sig-paren">(</span><em>xmin=None</em>, <em>xmax=None</em>, <em>dx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.SimpleRecipe.setCalculationRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Set epsilon-inclusive calculation range.</p>
<p>Adhere to the observed <code class="docutils literal notranslate"><span class="pre">xobs</span></code> points when <code class="docutils literal notranslate"><span class="pre">dx</span></code> is the same
as in the data.  <code class="docutils literal notranslate"><span class="pre">xmin</span></code> and <code class="docutils literal notranslate"><span class="pre">xmax</span></code> are clipped at the bounds
of the observed data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmin</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The minimum value of the independent variable.  Keep the
current minimum when not specified.  If specified as “obs”
reset to the minimum observed value.</li>
<li><strong>xmax</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The maximum value of the independent variable.  Keep the
current maximum when not specified.  If specified as “obs”
reset to the maximum observed value.</li>
<li><strong>dx</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The sample spacing in the independent variable.  When different
from the data, resample the <code class="docutils literal notranslate"><span class="pre">x</span></code> as anchored at <code class="docutils literal notranslate"><span class="pre">xmin</span></code>.</li>
<li><strong>that xmin is always inclusive</strong><strong> (</strong><strong>unless clipped</strong><strong>)</strong><strong> xmax is inclusive</strong> (<em>Note</em>) – </li>
<li><strong>it is within the bounds of the observed data.</strong> (<em>if</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#AttributeError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> – If there is no observed data.</li>
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – When xmin &gt; xmax or if dx &lt;= 0.  Also if dx &gt; xmax - xmin.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.SimpleRecipe.setEquation">
<code class="descname">setEquation</code><span class="sig-paren">(</span><em>eqstr</em>, <em>ns={}</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.SimpleRecipe.setEquation" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the profile equation for the FitContribution.</p>
<p>This sets the equation that will be used when generating the residual.
The equation will be usable within setResidualEquation as “eq”, and it
takes no arguments.</p>
<dl class="docutils">
<dt>eqstr   –  A string representation of the equation. Variables will be</dt>
<dd>extracted from this equation and be given an initial value
of 0.</dd>
<dt>ns      –  A dictionary of Parameters, indexed by name, that are used</dt>
<dd>in the eqstr, but not registered (default {}).</dd>
</dl>
<p>Raises ValueError if ns uses a name that is already used for a
variable.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.fitbase.SimpleRecipe.setObservedProfile">
<code class="descname">setObservedProfile</code><span class="sig-paren">(</span><em>xobs</em>, <em>yobs</em>, <em>dyobs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.fitbase.SimpleRecipe.setObservedProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the observed profile.</p>
<p>Arguments
xobs    –  Numpy array of the independent variable
yobs    –  Numpy array of the observed signal.
dyobs   –  Numpy array of the uncertainty in the observed signal. If</p>
<blockquote>
<div>dyobs is None (default), it will be set to 1 at each
observed xobs.</div></blockquote>
<p>Raises ValueError if len(yobs) != len(xobs)
Raises ValueError if dyobs != None and len(dyobs) != len(xobs)</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="sidebar-anchor"></a>
    

  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">diffpy.srfit.fitbase package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.calculator">diffpy.srfit.fitbase.calculator module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.configurable">diffpy.srfit.fitbase.configurable module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.constraint">diffpy.srfit.fitbase.constraint module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.fitcontribution">diffpy.srfit.fitbase.fitcontribution module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.fithook">diffpy.srfit.fitbase.fithook module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.fitrecipe">diffpy.srfit.fitbase.fitrecipe module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.fitresults">diffpy.srfit.fitbase.fitresults module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.parameter">diffpy.srfit.fitbase.parameter module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.parameterset">diffpy.srfit.fitbase.parameterset module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.profile">diffpy.srfit.fitbase.profile module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.profilegenerator">diffpy.srfit.fitbase.profilegenerator module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.profileparser">diffpy.srfit.fitbase.profileparser module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.recipeorganizer">diffpy.srfit.fitbase.recipeorganizer module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.restraint">diffpy.srfit.fitbase.restraint module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.simplerecipe">diffpy.srfit.fitbase.simplerecipe module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase.validatable">diffpy.srfit.fitbase.validatable module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.fitbase">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="diffpy.srfit.equation.visitors.html"
                        title="previous chapter">diffpy.srfit.equation.visitors package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="diffpy.srfit.interface.html"
                        title="next chapter">diffpy.srfit.interface package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/diffpy.srfit.fitbase.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="diffpy.srfit.interface.html" title="diffpy.srfit.interface package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="diffpy.srfit.equation.visitors.html" title="diffpy.srfit.equation.visitors package"
             accesskey="P">previous</a> |</li>
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Brookhaven National Laboratory.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>