<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>diffpy.srfit.pdf package &#8212; diffpy.srfit 3.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="diffpy.srfit.sas package" href="diffpy.srfit.sas.html" />
    <link rel="prev" title="diffpy.srfit.interface package" href="diffpy.srfit.interface.html" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" type="image/png" href="../_static/favicon.png" />
    <meta name="viewport" content="width=device-width,initial-scale=0.8">
    
    

  </head><body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="responsive-menu"><a href="#sidebar-anchor" title="Navigation">&#9776;</a></li>
        <li><a href="../index.html">diffpy.srfit 3.0.0 documentation</a> &#187;</li>
          <li><a href="diffpy.srfit.html" accesskey="U">diffpy.srfit package</a> &#187;</li> 
      </ul>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="diffpy-srfit-pdf-package">
<h1>diffpy.srfit.pdf package<a class="headerlink" href="#diffpy-srfit-pdf-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-diffpy.srfit.pdf.basepdfgenerator">
<span id="diffpy-srfit-pdf-basepdfgenerator-module"></span><h2>diffpy.srfit.pdf.basepdfgenerator module<a class="headerlink" href="#module-diffpy.srfit.pdf.basepdfgenerator" title="Permalink to this headline">¶</a></h2>
<p>PDF profile generator base class.</p>
<p>The BasePDFGenerator class interfaces with SrReal PDF calculators and is used
as a base for the PDFGenerator and DebyePDFGenerator classes.</p>
<dl class="class">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator">
<em class="property">class </em><code class="descclassname">diffpy.srfit.pdf.basepdfgenerator.</code><code class="descname">BasePDFGenerator</code><span class="sig-paren">(</span><em>name='pdf'</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.fitbase.html#diffpy.srfit.fitbase.profilegenerator.ProfileGenerator" title="diffpy.srfit.fitbase.profilegenerator.ProfileGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.profilegenerator.ProfileGenerator</span></code></a></p>
<p>Base class for calculating PDF profiles using SrReal.</p>
<p>This works with diffpy.structure.Structure, pyobjcryst.crystal.Crystal and
pyobjcryst.molecule.Molecule instances. Note that the managed Parameters
are not created until the structure is added.</p>
<p>Attributes:
_calc   –  PDFCalculator or DebyePDFCalculator instance for calculating</p>
<blockquote>
<div>the PDF.</div></blockquote>
<p>_phase  –  The structure ParameterSet used to calculate the profile.
stru    –  The structure objected adapted by _phase.
_lastr  –  The last value of r over which the PDF was calculated. This is</p>
<blockquote>
<div>used to configure the calculator when r changes.</div></blockquote>
<p>_pool   –  A multiprocessing.Pool for managing parallel computation.</p>
<p>Managed Parameters:
scale   –  Scale factor
delta1  –  Linear peak broadening term
delta2  –  Quadratic peak broadening term
qbroad  –  Resolution peak broadening term
qdamp   –  Resolution peak dampening term</p>
<p>Managed ParameterSets:
The structure ParameterSet (SrRealParSet instance) used to calculate the
profile is named by the user.</p>
<p>Usable Metadata:
stype   –  The scattering type “X” for x-ray, “N” for neutron (see</p>
<blockquote>
<div>‘setScatteringType’).</div></blockquote>
<dl class="docutils">
<dt>qmax    –  The maximum scattering vector used to generate the PDF (see</dt>
<dd>setQmax).</dd>
<dt>qmin    –  The minimum scattering vector used to generate the PDF (see</dt>
<dd>setQmin).</dd>
</dl>
<p>scale   –  See Managed Parameters.
delta1  –  See Managed Parameters.
delta2  –  See Managed Parameters.
qbroad  –  See Managed Parameters.
qdamp   –  See Managed Parameters.</p>
<dl class="method">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.getQmax">
<code class="descname">getQmax</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.getQmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the qmax value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.getQmin">
<code class="descname">getQmin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.getQmin" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the qmin value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.getScatteringType">
<code class="descname">getScatteringType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.getScatteringType" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the scattering type. See ‘setScatteringType’.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.parallel">
<code class="descname">parallel</code><span class="sig-paren">(</span><em>ncpu</em>, <em>mapfunc=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.parallel" title="Permalink to this definition">¶</a></dt>
<dd><p>Run calculation in parallel.</p>
<p>ncpu    – Number of parallel processes.  Revert to serial mode when 1.
mapfunc – A mapping function to use. If this is None (default),</p>
<blockquote>
<div>multiprocessing.Pool.imap_unordered will be used.</div></blockquote>
<p>No return value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.processMetaData">
<code class="descname">processMetaData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.processMetaData" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the metadata once it gets set.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.setPhase">
<code class="descname">setPhase</code><span class="sig-paren">(</span><em>parset</em>, <em>periodic=True</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.setPhase" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the phase that will be used to calculate the PDF.</p>
<p>Set the phase directly with a DiffpyStructureParSet,
ObjCrystCrystalParSet or ObjCrystMoleculeParSet that adapts a structure
object (from diffpy or pyobjcryst).  The passed ParameterSet will be
managed by this generator.</p>
<dl class="docutils">
<dt>parset  –  A SrRealParSet that holds the structural information.</dt>
<dd>This can be used to share the phase between multiple
BasePDFGenerators, and have the changes in one reflect in
another.</dd>
<dt>periodic – The structure should be treated as periodic (default True).</dt>
<dd>Note that some structures do not support periodicity, in
which case this will be ignored.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.setQmax">
<code class="descname">setQmax</code><span class="sig-paren">(</span><em>qmax</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.setQmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the qmax value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.setQmin">
<code class="descname">setQmin</code><span class="sig-paren">(</span><em>qmin</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.setQmin" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the qmin value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.setScatteringType">
<code class="descname">setScatteringType</code><span class="sig-paren">(</span><em>stype='X'</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.setScatteringType" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the scattering type.</p>
<dl class="docutils">
<dt>stype   –   “X” for x-ray, “N” for neutron, “E” for electrons,</dt>
<dd>or any registered type from diffpy.srreal from
ScatteringFactorTable.getRegisteredTypes().</dd>
</dl>
<p>Raises ValueError for unknown scattering type.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.setStructure">
<code class="descname">setStructure</code><span class="sig-paren">(</span><em>stru</em>, <em>name='phase'</em>, <em>periodic=True</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator.setStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the structure that will be used to calculate the PDF.</p>
<p>This creates a DiffpyStructureParSet, ObjCrystCrystalParSet or
ObjCrystMoleculeParSet that adapts stru to a ParameterSet interface.
See those classes (located in diffpy.srfit.structure) for how they are
used. The resulting ParameterSet will be managed by this generator.</p>
<dl class="docutils">
<dt>stru    –  diffpy.structure.Structure, pyobjcryst.crystal.Crystal or</dt>
<dd>pyobjcryst.molecule.Molecule instance.  Default None.</dd>
<dt>name    –  A name to give to the managed ParameterSet that adapts stru</dt>
<dd>(default “phase”).</dd>
<dt>periodic – The structure should be treated as periodic (default</dt>
<dd>True). Note that some structures do not support
periodicity, in which case this will have no effect on the
PDF calculation.</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.pdf.characteristicfunctions">
<span id="diffpy-srfit-pdf-characteristicfunctions-module"></span><h2>diffpy.srfit.pdf.characteristicfunctions module<a class="headerlink" href="#module-diffpy.srfit.pdf.characteristicfunctions" title="Permalink to this headline">¶</a></h2>
<p>Form factors (characteristic functions) used in PDF nanoshape fitting.</p>
<p>These are used to calculate the attenuation of the PDF due to a finite size.
For a crystal-like nanoparticle, one can calculate the PDF via
Gnano(r) = f(r) Gcryst(r),
where f(r) is the nanoparticle characteristic function and
Gcryst(f) is the crystal PDF.</p>
<p>These functions are meant to be imported and added to a FitContribution using
the ‘registerFunction’ method of that class.</p>
<dl class="function">
<dt id="diffpy.srfit.pdf.characteristicfunctions.sphericalCF">
<code class="descclassname">diffpy.srfit.pdf.characteristicfunctions.</code><code class="descname">sphericalCF</code><span class="sig-paren">(</span><em>r</em>, <em>psize</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.characteristicfunctions.sphericalCF" title="Permalink to this definition">¶</a></dt>
<dd><p>Spherical nanoparticle characteristic function.</p>
<p>r       –  distance of interaction
psize   –  The particle diameter</p>
<p>From Kodama et al., Acta Cryst. A, 62, 444-453
(converted from radius to diameter)</p>
</dd></dl>

<dl class="function">
<dt id="diffpy.srfit.pdf.characteristicfunctions.spheroidalCF">
<code class="descclassname">diffpy.srfit.pdf.characteristicfunctions.</code><code class="descname">spheroidalCF</code><span class="sig-paren">(</span><em>r</em>, <em>erad</em>, <em>prad</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.characteristicfunctions.spheroidalCF" title="Permalink to this definition">¶</a></dt>
<dd><p>Spheroidal characteristic function specified using radii.</p>
<p>Spheroid with radii (erad, erad, prad)</p>
<p>prad    –  polar radius
erad    –  equatorial radius</p>
<p>erad &lt; prad equates to a prolate spheroid
erad &gt; prad equates to a oblate spheroid
erad == prad is a sphere</p>
</dd></dl>

<dl class="function">
<dt id="diffpy.srfit.pdf.characteristicfunctions.spheroidalCF2">
<code class="descclassname">diffpy.srfit.pdf.characteristicfunctions.</code><code class="descname">spheroidalCF2</code><span class="sig-paren">(</span><em>r</em>, <em>psize</em>, <em>axrat</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.characteristicfunctions.spheroidalCF2" title="Permalink to this definition">¶</a></dt>
<dd><p>Spheroidal nanoparticle characteristic function.</p>
<p>Form factor for ellipsoid with radii (psize/2, psize/2, axrat*psize/2)</p>
<p>r      –  distance of interaction
psize  –  The equatorial diameter
axrat  –  The ratio of axis lengths</p>
<p>From Lei et al., Phys. Rev. B, 80, 024118 (2009)</p>
</dd></dl>

<dl class="function">
<dt id="diffpy.srfit.pdf.characteristicfunctions.lognormalSphericalCF">
<code class="descclassname">diffpy.srfit.pdf.characteristicfunctions.</code><code class="descname">lognormalSphericalCF</code><span class="sig-paren">(</span><em>r</em>, <em>psize</em>, <em>psig</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.characteristicfunctions.lognormalSphericalCF" title="Permalink to this definition">¶</a></dt>
<dd><p>Spherical nanoparticle characteristic function with lognormal size
distribution.</p>
<p>r      –  distance of interaction
psize  –  The mean particle diameter
psig   –  The log-normal width of the particle diameter</p>
<p>Here, r is the independent variable, mu is the mean of the distrubution
(not of the particle size), and s is the width of the distribution. This is
the characteristic function for the lognormal distribution of particle
diameter:</p>
<dl class="docutils">
<dt>F(r, mu, s) = 0.5*Erfc((-mu-3*s^2+Log(r))/(sqrt(2)*s))</dt>
<dd><ul class="first simple">
<li>0.25*r^3*Erfc((-mu+Log(r))/(sqrt(2)*s))*exp(-3*mu-4.5*s^2)</li>
</ul>
<ul class="last simple">
<li>0.75*r*Erfc((-mu-2*s^2+Log(r))/(sqrt(2)*s))*exp(-mu-2.5*s^2)</li>
</ul>
</dd>
</dl>
<p>The expectation value of the distribution gives the average particle
diameter, psize. The variance of the distribution gives psig^2. mu and s
can be expressed in terms of these as:</p>
<p>s^2 = log((psig/psize)^2 + 1)
mu = log(psize) - s^2/2</p>
<p>Source unknown</p>
</dd></dl>

<dl class="function">
<dt id="diffpy.srfit.pdf.characteristicfunctions.sheetCF">
<code class="descclassname">diffpy.srfit.pdf.characteristicfunctions.</code><code class="descname">sheetCF</code><span class="sig-paren">(</span><em>r</em>, <em>sthick</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.characteristicfunctions.sheetCF" title="Permalink to this definition">¶</a></dt>
<dd><p>Nanosheet characteristic function.</p>
<p>r       –  distance of interaction
sthick  –  Thickness of nanosheet</p>
<p>From Kodama et al., Acta Cryst. A, 62, 444-453</p>
</dd></dl>

<dl class="function">
<dt id="diffpy.srfit.pdf.characteristicfunctions.shellCF">
<code class="descclassname">diffpy.srfit.pdf.characteristicfunctions.</code><code class="descname">shellCF</code><span class="sig-paren">(</span><em>r</em>, <em>radius</em>, <em>thickness</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.characteristicfunctions.shellCF" title="Permalink to this definition">¶</a></dt>
<dd><p>Spherical shell characteristic function.</p>
<p>radius      –  Inner radius
thickness   –  Thickness of shell</p>
<p>outer radius = radius + thickness</p>
<p>From Lei et al., Phys. Rev. B, 80, 024118 (2009)</p>
</dd></dl>

<dl class="function">
<dt id="diffpy.srfit.pdf.characteristicfunctions.shellCF2">
<code class="descclassname">diffpy.srfit.pdf.characteristicfunctions.</code><code class="descname">shellCF2</code><span class="sig-paren">(</span><em>r</em>, <em>a</em>, <em>delta</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.characteristicfunctions.shellCF2" title="Permalink to this definition">¶</a></dt>
<dd><p>Spherical shell characteristic function.</p>
<p>a       –  Central radius
delta   –  Thickness of shell</p>
<p>outer radius = a + thickness/2</p>
<p>From Lei et al., Phys. Rev. B, 80, 024118 (2009)</p>
</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.pdf.characteristicfunctions.SASCF">
<em class="property">class </em><code class="descclassname">diffpy.srfit.pdf.characteristicfunctions.</code><code class="descname">SASCF</code><span class="sig-paren">(</span><em>name</em>, <em>model</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.characteristicfunctions.SASCF" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.fitbase.html#diffpy.srfit.fitbase.calculator.Calculator" title="diffpy.srfit.fitbase.calculator.Calculator"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.calculator.Calculator</span></code></a></p>
<p>Calculator class for characteristic functions from sas-models.</p>
<p>This class wraps a sas.models.BaseModel to calculate I(Q) related to
nanoparticle shape. This I(Q) is inverted to f(r) according to:
f(r) = 1 / (4 pi r) * SINFT(I(Q)),
where “SINFT” represents the sine Fourier transform.</p>
<p>Attributes:
_model      –  BaseModel object this adapts.</p>
<p>Managed Parameters:
These depend on the parameters of the BaseModel object held by _model. They
are created from the ‘params’ attribute of the BaseModel. If a dispersion
is set for the BaseModel, the dispersion “width” will be accessible under
“&lt;parname&gt;_width”, where &lt;parname&gt; is the name a parameter adjusted by
dispersion.</p>
</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.pdf.debyepdfgenerator">
<span id="diffpy-srfit-pdf-debyepdfgenerator-module"></span><h2>diffpy.srfit.pdf.debyepdfgenerator module<a class="headerlink" href="#module-diffpy.srfit.pdf.debyepdfgenerator" title="Permalink to this headline">¶</a></h2>
<p>PDF profile generator using the Debye equation.</p>
<p>The DebyePDFGenerator class can take a diffpy.structure,
pyobjcryst.crystal.Crystal or pyobjcryst.molecule.Molecule object and calculate
the PDF from it. This generator is especially appropriate for isolated
scatterers, such as nanoparticles and molecules.</p>
<dl class="class">
<dt id="diffpy.srfit.pdf.debyepdfgenerator.DebyePDFGenerator">
<em class="property">class </em><code class="descclassname">diffpy.srfit.pdf.debyepdfgenerator.</code><code class="descname">DebyePDFGenerator</code><span class="sig-paren">(</span><em>name='pdf'</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.debyepdfgenerator.DebyePDFGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator" title="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator</span></code></a></p>
<p>A class for calculating the PDF from an isolated scatterer.</p>
<p>This works with diffpy.structure.Structure, pyobjcryst.crystal.Crystal and
pyobjcryst.molecule.Molecule instances. Note that the managed Parameters
are not created until the structure is added.</p>
<p>Attributes:
_calc   –  DebyePDFCalculator instance for calculating the PDF
_phase  –  The structure ParameterSets used to calculate the profile.
stru    –  The structure objected adapted by _phase.
_lastr  –  The last value of r over which the PDF was calculated. This is</p>
<blockquote>
<div>used to configure the calculator when r changes.</div></blockquote>
<p>Managed Parameters:
scale   –  Scale factor
delta1  –  Linear peak broadening term
delta2  –  Quadratic peak broadening term
qbroad  –  Resolution peak broadening term
qdamp   –  Resolution peak dampening term</p>
<p>Managed ParameterSets:
The structure ParameterSet (SrRealStructure instance) used to calculate the
profile is named by the user.</p>
<p>Usable Metadata:
stype   –  The scattering type “X” for x-ray, “N” for neutron (see</p>
<blockquote>
<div>‘setScatteringType’).</div></blockquote>
<dl class="docutils">
<dt>qmax    –  The maximum scattering vector used to generate the PDF (see</dt>
<dd>setQmax).</dd>
<dt>qmin    –  The minimum scattering vector used to generate the PDF (see</dt>
<dd>setQmin).</dd>
</dl>
<p>scale   –  See Managed Parameters.
delta1  –  See Managed Parameters.
delta2  –  See Managed Parameters.
qbroad  –  See Managed Parameters.
qdamp   –  See Managed Parameters.</p>
<dl class="method">
<dt id="diffpy.srfit.pdf.debyepdfgenerator.DebyePDFGenerator.setPhase">
<code class="descname">setPhase</code><span class="sig-paren">(</span><em>parset</em>, <em>periodic=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.debyepdfgenerator.DebyePDFGenerator.setPhase" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the phase that will be used to calculate the PDF.</p>
<p>Set the phase directly with a DiffpyStructureParSet,
ObjCrystCrystalParSet or ObjCrystMoleculeParSet that adapts a structure
object (from diffpy or pyobjcryst).  The passed ParameterSet will be
managed by this generator.</p>
<dl class="docutils">
<dt>parset  –  A SrRealParSet that holds the structural information.</dt>
<dd>This can be used to share the phase between multiple
BasePDFGenerators, and have the changes in one reflect in
another.</dd>
<dt>periodic – The structure should be treated as periodic (default True).</dt>
<dd>Note that some structures do not support periodicity, in
which case this will be ignored.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.debyepdfgenerator.DebyePDFGenerator.setStructure">
<code class="descname">setStructure</code><span class="sig-paren">(</span><em>stru</em>, <em>name='phase'</em>, <em>periodic=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.debyepdfgenerator.DebyePDFGenerator.setStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the structure that will be used to calculate the PDF.</p>
<p>This creates a DiffpyStructureParSet, ObjCrystCrystalParSet or
ObjCrystMoleculeParSet that adapts stru to a ParameterSet interface.
See those classes (located in diffpy.srfit.structure) for how they are
used. The resulting ParameterSet will be managed by this generator.</p>
<dl class="docutils">
<dt>stru    –  diffpy.structure.Structure, pyobjcryst.crystal.Crystal or</dt>
<dd>pyobjcryst.molecule.Molecule instance.  Default None.</dd>
<dt>name    –  A name to give to the managed ParameterSet that adapts stru</dt>
<dd>(default “phase”).</dd>
<dt>periodic – The structure should be treated as periodic (default</dt>
<dd>False). Note that some structures do not support
periodicity, in which case this will have no effect on the
PDF calculation.</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.pdf.pdfcontribution">
<span id="diffpy-srfit-pdf-pdfcontribution-module"></span><h2>diffpy.srfit.pdf.pdfcontribution module<a class="headerlink" href="#module-diffpy.srfit.pdf.pdfcontribution" title="Permalink to this headline">¶</a></h2>
<p>PDFContribution class.</p>
<p>This is a custom FitContribution that simplifies the creation of PDF fits.</p>
<dl class="class">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution">
<em class="property">class </em><code class="descclassname">diffpy.srfit.pdf.pdfcontribution.</code><code class="descname">PDFContribution</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.fitbase.html#diffpy.srfit.fitbase.fitcontribution.FitContribution" title="diffpy.srfit.fitbase.fitcontribution.FitContribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.fitcontribution.FitContribution</span></code></a></p>
<p>PDFContribution class.</p>
<p>PDFContribution is a FitContribution that is customized for PDF fits. Data
and phases can be added directly to the PDFContribution. Setup of
constraints and restraints requires direct interaction with the generator
attributes (see setPhase).</p>
<p>Attributes
name            –  A name for this FitContribution.
profile         –  A Profile that holds the measured (and calculated)</p>
<blockquote>
<div>signal.</div></blockquote>
<dl class="docutils">
<dt>_meta           –  Metadata dictionary. This is specific to this object,</dt>
<dd>and not shared with the profile. This is used to record
configuration options, like qmax.</dd>
</dl>
<p>_calculators    –  A managed dictionary of Calculators, indexed by name.
_constraints    –  A set of constrained Parameters. Constraints can be</p>
<blockquote>
<div>added using the ‘constrain’ methods.</div></blockquote>
<p>_generators     –  A managed dictionary of ProfileGenerators.
_parameters     –  A managed OrderedDict of parameters.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ or ‘confine’ methods.</div></blockquote>
<p>_parsets        –  A managed dictionary of ParameterSets.
_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</p>
<blockquote>
<div>instance that is used to create constraints and
restraints from string</div></blockquote>
<p>_eq             –  The FitContribution equation that will be optimized.
_reseq          –  The residual equation.
_xname          –  Name of the x-variable
_yname          –  Name of the y-variable
_dyname         –  Name of the dy-variable</p>
<p>Managed Parameters:
scale   –  Scale factor
qbroad  –  Resolution peak broadening term
qdamp   –  Resolution peak dampening term</p>
<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.addPhase">
<code class="descname">addPhase</code><span class="sig-paren">(</span><em>name</em>, <em>parset</em>, <em>periodic=True</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.addPhase" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a phase that goes into the PDF calculation.</p>
<dl class="docutils">
<dt>name    –  A name to give the generator that will manage the PDF</dt>
<dd>calculation from the passed parameter phase. The parset
will be accessible via the name “phase” as an attribute
of the generator, e.g., contribution.name.phase, where
‘contribution’ is this contribution and ‘name’ is passed
name.</dd>
<dt>parset  –  A SrRealParSet that holds the structural information.</dt>
<dd>This can be used to share the phase between multiple
BasePDFGenerators, and have the changes in one reflect in
another.</dd>
<dt>periodic – The structure should be treated as periodic.  If this is</dt>
<dd>True (default), then a PDFGenerator will be used to
calculate the PDF from the phase. Otherwise, a
DebyePDFGenerator will be used. Note that some structures
do not support periodicity, in which case this may be
ignored.</dd>
</dl>
<p>Returns the new phase (ParameterSet appropriate for what was passed in
stru.)</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.addStructure">
<code class="descname">addStructure</code><span class="sig-paren">(</span><em>name</em>, <em>stru</em>, <em>periodic=True</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.addStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a phase that goes into the PDF calculation.</p>
<dl class="docutils">
<dt>name    –  A name to give the generator that will manage the PDF</dt>
<dd>calculation from the passed structure. The adapted
structure will be accessible via the name “phase” as an
attribute of the generator, e.g.
contribution.name.phase, where ‘contribution’ is this
contribution and ‘name’ is passed name.
(default), then the name will be set as “phase”.</dd>
<dt>stru    –  diffpy.structure.Structure, pyobjcryst.crystal.Crystal or</dt>
<dd>pyobjcryst.molecule.Molecule instance.  Default None.</dd>
<dt>periodic – The structure should be treated as periodic.  If this is</dt>
<dd>True (default), then a PDFGenerator will be used to
calculate the PDF from the phase. Otherwise, a
DebyePDFGenerator will be used. Note that some structures
do not support periodicity, in which case this may be
ignored.</dd>
</dl>
<p>Returns the new phase (ParameterSet appropriate for what was passed in
stru.)</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.getQmax">
<code class="descname">getQmax</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.getQmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the qmax value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.getQmin">
<code class="descname">getQmin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.getQmin" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the qmin value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.getScatteringType">
<code class="descname">getScatteringType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.getScatteringType" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the scattering type. See ‘setScatteringType’.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.loadData">
<code class="descname">loadData</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.loadData" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the data in various formats.</p>
<p>This uses the PDFParser to load the data and then passes it to the
build-in profile with loadParsedData.</p>
<dl class="docutils">
<dt>data    –  An open file-like object, name of a file that contains data</dt>
<dd>or a string containing the data.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.savetxt">
<code class="descname">savetxt</code><span class="sig-paren">(</span><em>fname</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.savetxt" title="Permalink to this definition">¶</a></dt>
<dd><p>Call numpy.savetxt with x, ycalc, y, dy</p>
<p>This calls on the built-in Profile.</p>
<p>Arguments are passed to numpy.savetxt.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.setCalculationRange">
<code class="descname">setCalculationRange</code><span class="sig-paren">(</span><em>xmin=None</em>, <em>xmax=None</em>, <em>dx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.setCalculationRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Set epsilon-inclusive calculation range.</p>
<p>Adhere to the observed <code class="docutils literal notranslate"><span class="pre">xobs</span></code> points when <code class="docutils literal notranslate"><span class="pre">dx</span></code> is the same
as in the data.  <code class="docutils literal notranslate"><span class="pre">xmin</span></code> and <code class="docutils literal notranslate"><span class="pre">xmax</span></code> are clipped at the bounds
of the observed data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmin</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The minimum value of the independent variable.  Keep the
current minimum when not specified.  If specified as “obs”
reset to the minimum observed value.</li>
<li><strong>xmax</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The maximum value of the independent variable.  Keep the
current maximum when not specified.  If specified as “obs”
reset to the maximum observed value.</li>
<li><strong>dx</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The sample spacing in the independent variable.  When different
from the data, resample the <code class="docutils literal notranslate"><span class="pre">x</span></code> as anchored at <code class="docutils literal notranslate"><span class="pre">xmin</span></code>.</li>
<li><strong>that xmin is always inclusive</strong><strong> (</strong><strong>unless clipped</strong><strong>)</strong><strong> xmax is inclusive</strong> (<em>Note</em>) – </li>
<li><strong>it is within the bounds of the observed data.</strong> (<em>if</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#AttributeError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> – If there is no observed data.</li>
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – When xmin &gt; xmax or if dx &lt;= 0.  Also if dx &gt; xmax - xmin.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.setQmax">
<code class="descname">setQmax</code><span class="sig-paren">(</span><em>qmax</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.setQmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the qmax value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.setQmin">
<code class="descname">setQmin</code><span class="sig-paren">(</span><em>qmin</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.setQmin" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the qmin value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.pdfcontribution.PDFContribution.setScatteringType">
<code class="descname">setScatteringType</code><span class="sig-paren">(</span><em>type='X'</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfcontribution.PDFContribution.setScatteringType" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the scattering type.</p>
<p>type    –   “X” for x-ray or “N” for neutron</p>
<p>Raises ValueError if type is not “X” or “N”</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.pdf.pdfgenerator">
<span id="diffpy-srfit-pdf-pdfgenerator-module"></span><h2>diffpy.srfit.pdf.pdfgenerator module<a class="headerlink" href="#module-diffpy.srfit.pdf.pdfgenerator" title="Permalink to this headline">¶</a></h2>
<p>PDF profile generator.</p>
<p>The PDFGenerator class can take a diffpy.structure, pyobjcryst.crystal.Crystal
or pyobjcryst.molecule.Molecule object and calculate the crystal PDF from it.
The passed structure object is wrapped in a StructureParameter set, which makes
its attributes refinable. See the class definition for more details and the
examples for its use.</p>
<dl class="class">
<dt id="diffpy.srfit.pdf.pdfgenerator.PDFGenerator">
<em class="property">class </em><code class="descclassname">diffpy.srfit.pdf.pdfgenerator.</code><code class="descname">PDFGenerator</code><span class="sig-paren">(</span><em>name='pdf'</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfgenerator.PDFGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator" title="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator</span></code></a></p>
<p>A class for calculating the PDF from a single crystal structure.</p>
<p>This works with diffpy.structure.Structure, pyobjcryst.crystal.Crystal and
pyobjcryst.molecule.Molecule instances. Note that the managed Parameters
are not created until the structure is added.</p>
<p>Attributes:
_calc   –  PDFCalculator instance for calculating the PDF
_phase  –  The structure ParameterSet used to calculate the profile.
_lastr  –  The last value of r over which the PDF was calculated. This is</p>
<blockquote>
<div>used to configure the calculator when r changes.</div></blockquote>
<p>Managed Parameters:
scale   –  Scale factor
delta1  –  Linear peak broadening term
delta2  –  Quadratic peak broadening term
qbroad  –  Resolution peak broadening term
qdamp   –  Resolution peak dampening term</p>
<p>Managed ParameterSets:
The structure ParameterSet (SrRealStructure instance) used to calculate the
profile is named by the user.</p>
<p>Usable Metadata:
stype   –  The scattering type “X” for x-ray, “N” for neutron (see</p>
<blockquote>
<div>‘setScatteringType’).</div></blockquote>
<dl class="docutils">
<dt>qmax    –  The maximum scattering vector used to generate the PDF (see</dt>
<dd>setQmax).</dd>
<dt>qmin    –  The minimum scattering vector used to generate the PDF (see</dt>
<dd>setQmin).</dd>
</dl>
<p>scale   –  See Managed Parameters.
delta1  –  See Managed Parameters.
delta2  –  See Managed Parameters.
qbroad  –  See Managed Parameters.
qdamp   –  See Managed Parameters.</p>
</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.pdf.pdfparser">
<span id="diffpy-srfit-pdf-pdfparser-module"></span><h2>diffpy.srfit.pdf.pdfparser module<a class="headerlink" href="#module-diffpy.srfit.pdf.pdfparser" title="Permalink to this headline">¶</a></h2>
<p>This module contains parsers for PDF data.</p>
<p>PDFParser is suitable for parsing data generated from PDFGetN and PDFGetX.</p>
<p>See the class documentation for more information.</p>
<dl class="class">
<dt id="diffpy.srfit.pdf.pdfparser.PDFParser">
<em class="property">class </em><code class="descclassname">diffpy.srfit.pdf.pdfparser.</code><code class="descname">PDFParser</code><a class="headerlink" href="#diffpy.srfit.pdf.pdfparser.PDFParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.fitbase.html#diffpy.srfit.fitbase.profileparser.ProfileParser" title="diffpy.srfit.fitbase.profileparser.ProfileParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.profileparser.ProfileParser</span></code></a></p>
<p>Class for holding a diffraction pattern.</p>
<p>Attributes</p>
<dl class="docutils">
<dt>_format     –  Name of the data format that this parses (string, default</dt>
<dd>“”). The format string is a unique identifier for the data
format handled by the parser.</dd>
<dt>_banks      –  The data from each bank. Each bank contains a (x, y, dx, dy)</dt>
<dd><p class="first">tuple:
x       –  A numpy array containing the independent</p>
<blockquote>
<div>variable read from the file.</div></blockquote>
<dl class="last docutils">
<dt>y       –  A numpy array containing the profile</dt>
<dd>from the file.</dd>
<dt>dx      –  A numpy array containing the uncertainty in x</dt>
<dd>read from the file. This is 0 if the uncertainty
cannot be read.</dd>
<dt>dy      –  A numpy array containing the uncertainty read</dt>
<dd>from the file. This is 0 if the uncertainty
cannot be read.</dd>
</dl>
</dd>
</dl>
<p>_x          –  Indpendent variable from the chosen bank
_y          –  Profile from the chosen bank
_dx         –  Uncertainty in independent variable from the chosen bank
_dy         –  Uncertainty in profile from the chosen bank
_meta       –  A dictionary containing metadata read from the file.</p>
<p>General Metadata</p>
<dl class="docutils">
<dt>filename    –  The name of the file from which data was parsed. This key</dt>
<dd>will not exist if data was not read from file.</dd>
</dl>
<p>nbanks      –  The number of banks parsed.
bank        –  The chosen bank number.</p>
<p>Metadata - These may appear in the metadata dictionary</p>
<p>stype       –  The scattering type (“X”, “N”)
qmin        –  Minimum scattering vector (float)
qmax        –  Maximum scattering vector (float)
qdamp       –  Resolution damping factor (float)
qbroad      –  Resolution broadening factor (float)
spdiameter  –  Nanoparticle diameter (float)
scale       –  Data scale (float)
temperature –  Temperature (float)
doping      –  Doping (float)</p>
<dl class="method">
<dt id="diffpy.srfit.pdf.pdfparser.PDFParser.parseString">
<code class="descname">parseString</code><span class="sig-paren">(</span><em>patstring</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.pdfparser.PDFParser.parseString" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a string and set the _x, _y, _dx, _dy and _meta variables.</p>
<p>When _dx or _dy cannot be obtained in the data format it is set to 0.</p>
<p>This wipes out the currently loaded data and selected bank number.</p>
<p>Arguments
patstring   –  A string containing the pattern</p>
<p>Raises ParseError if the string cannot be parsed</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-diffpy.srfit.pdf">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-diffpy.srfit.pdf" title="Permalink to this headline">¶</a></h2>
<p>PDF calculation tools.</p>
<dl class="class">
<dt id="diffpy.srfit.pdf.PDFGenerator">
<em class="property">class </em><code class="descclassname">diffpy.srfit.pdf.</code><code class="descname">PDFGenerator</code><span class="sig-paren">(</span><em>name='pdf'</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator" title="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator</span></code></a></p>
<p>A class for calculating the PDF from a single crystal structure.</p>
<p>This works with diffpy.structure.Structure, pyobjcryst.crystal.Crystal and
pyobjcryst.molecule.Molecule instances. Note that the managed Parameters
are not created until the structure is added.</p>
<p>Attributes:
_calc   –  PDFCalculator instance for calculating the PDF
_phase  –  The structure ParameterSet used to calculate the profile.
_lastr  –  The last value of r over which the PDF was calculated. This is</p>
<blockquote>
<div>used to configure the calculator when r changes.</div></blockquote>
<p>Managed Parameters:
scale   –  Scale factor
delta1  –  Linear peak broadening term
delta2  –  Quadratic peak broadening term
qbroad  –  Resolution peak broadening term
qdamp   –  Resolution peak dampening term</p>
<p>Managed ParameterSets:
The structure ParameterSet (SrRealStructure instance) used to calculate the
profile is named by the user.</p>
<p>Usable Metadata:
stype   –  The scattering type “X” for x-ray, “N” for neutron (see</p>
<blockquote>
<div>‘setScatteringType’).</div></blockquote>
<dl class="docutils">
<dt>qmax    –  The maximum scattering vector used to generate the PDF (see</dt>
<dd>setQmax).</dd>
<dt>qmin    –  The minimum scattering vector used to generate the PDF (see</dt>
<dd>setQmin).</dd>
</dl>
<p>scale   –  See Managed Parameters.
delta1  –  See Managed Parameters.
delta2  –  See Managed Parameters.
qbroad  –  See Managed Parameters.
qdamp   –  See Managed Parameters.</p>
</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.pdf.DebyePDFGenerator">
<em class="property">class </em><code class="descclassname">diffpy.srfit.pdf.</code><code class="descname">DebyePDFGenerator</code><span class="sig-paren">(</span><em>name='pdf'</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.DebyePDFGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator" title="diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.pdf.basepdfgenerator.BasePDFGenerator</span></code></a></p>
<p>A class for calculating the PDF from an isolated scatterer.</p>
<p>This works with diffpy.structure.Structure, pyobjcryst.crystal.Crystal and
pyobjcryst.molecule.Molecule instances. Note that the managed Parameters
are not created until the structure is added.</p>
<p>Attributes:
_calc   –  DebyePDFCalculator instance for calculating the PDF
_phase  –  The structure ParameterSets used to calculate the profile.
stru    –  The structure objected adapted by _phase.
_lastr  –  The last value of r over which the PDF was calculated. This is</p>
<blockquote>
<div>used to configure the calculator when r changes.</div></blockquote>
<p>Managed Parameters:
scale   –  Scale factor
delta1  –  Linear peak broadening term
delta2  –  Quadratic peak broadening term
qbroad  –  Resolution peak broadening term
qdamp   –  Resolution peak dampening term</p>
<p>Managed ParameterSets:
The structure ParameterSet (SrRealStructure instance) used to calculate the
profile is named by the user.</p>
<p>Usable Metadata:
stype   –  The scattering type “X” for x-ray, “N” for neutron (see</p>
<blockquote>
<div>‘setScatteringType’).</div></blockquote>
<dl class="docutils">
<dt>qmax    –  The maximum scattering vector used to generate the PDF (see</dt>
<dd>setQmax).</dd>
<dt>qmin    –  The minimum scattering vector used to generate the PDF (see</dt>
<dd>setQmin).</dd>
</dl>
<p>scale   –  See Managed Parameters.
delta1  –  See Managed Parameters.
delta2  –  See Managed Parameters.
qbroad  –  See Managed Parameters.
qdamp   –  See Managed Parameters.</p>
<dl class="method">
<dt id="diffpy.srfit.pdf.DebyePDFGenerator.setPhase">
<code class="descname">setPhase</code><span class="sig-paren">(</span><em>parset</em>, <em>periodic=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.DebyePDFGenerator.setPhase" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the phase that will be used to calculate the PDF.</p>
<p>Set the phase directly with a DiffpyStructureParSet,
ObjCrystCrystalParSet or ObjCrystMoleculeParSet that adapts a structure
object (from diffpy or pyobjcryst).  The passed ParameterSet will be
managed by this generator.</p>
<dl class="docutils">
<dt>parset  –  A SrRealParSet that holds the structural information.</dt>
<dd>This can be used to share the phase between multiple
BasePDFGenerators, and have the changes in one reflect in
another.</dd>
<dt>periodic – The structure should be treated as periodic (default True).</dt>
<dd>Note that some structures do not support periodicity, in
which case this will be ignored.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.DebyePDFGenerator.setStructure">
<code class="descname">setStructure</code><span class="sig-paren">(</span><em>stru</em>, <em>name='phase'</em>, <em>periodic=False</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.DebyePDFGenerator.setStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the structure that will be used to calculate the PDF.</p>
<p>This creates a DiffpyStructureParSet, ObjCrystCrystalParSet or
ObjCrystMoleculeParSet that adapts stru to a ParameterSet interface.
See those classes (located in diffpy.srfit.structure) for how they are
used. The resulting ParameterSet will be managed by this generator.</p>
<dl class="docutils">
<dt>stru    –  diffpy.structure.Structure, pyobjcryst.crystal.Crystal or</dt>
<dd>pyobjcryst.molecule.Molecule instance.  Default None.</dd>
<dt>name    –  A name to give to the managed ParameterSet that adapts stru</dt>
<dd>(default “phase”).</dd>
<dt>periodic – The structure should be treated as periodic (default</dt>
<dd>False). Note that some structures do not support
periodicity, in which case this will have no effect on the
PDF calculation.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.pdf.PDFContribution">
<em class="property">class </em><code class="descclassname">diffpy.srfit.pdf.</code><code class="descname">PDFContribution</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.fitbase.html#diffpy.srfit.fitbase.fitcontribution.FitContribution" title="diffpy.srfit.fitbase.fitcontribution.FitContribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.fitcontribution.FitContribution</span></code></a></p>
<p>PDFContribution class.</p>
<p>PDFContribution is a FitContribution that is customized for PDF fits. Data
and phases can be added directly to the PDFContribution. Setup of
constraints and restraints requires direct interaction with the generator
attributes (see setPhase).</p>
<p>Attributes
name            –  A name for this FitContribution.
profile         –  A Profile that holds the measured (and calculated)</p>
<blockquote>
<div>signal.</div></blockquote>
<dl class="docutils">
<dt>_meta           –  Metadata dictionary. This is specific to this object,</dt>
<dd>and not shared with the profile. This is used to record
configuration options, like qmax.</dd>
</dl>
<p>_calculators    –  A managed dictionary of Calculators, indexed by name.
_constraints    –  A set of constrained Parameters. Constraints can be</p>
<blockquote>
<div>added using the ‘constrain’ methods.</div></blockquote>
<p>_generators     –  A managed dictionary of ProfileGenerators.
_parameters     –  A managed OrderedDict of parameters.
_restraints     –  A set of Restraints. Restraints can be added using the</p>
<blockquote>
<div>‘restrain’ or ‘confine’ methods.</div></blockquote>
<p>_parsets        –  A managed dictionary of ParameterSets.
_eqfactory      –  A diffpy.srfit.equation.builder.EquationFactory</p>
<blockquote>
<div>instance that is used to create constraints and
restraints from string</div></blockquote>
<p>_eq             –  The FitContribution equation that will be optimized.
_reseq          –  The residual equation.
_xname          –  Name of the x-variable
_yname          –  Name of the y-variable
_dyname         –  Name of the dy-variable</p>
<p>Managed Parameters:
scale   –  Scale factor
qbroad  –  Resolution peak broadening term
qdamp   –  Resolution peak dampening term</p>
<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.addPhase">
<code class="descname">addPhase</code><span class="sig-paren">(</span><em>name</em>, <em>parset</em>, <em>periodic=True</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.addPhase" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a phase that goes into the PDF calculation.</p>
<dl class="docutils">
<dt>name    –  A name to give the generator that will manage the PDF</dt>
<dd>calculation from the passed parameter phase. The parset
will be accessible via the name “phase” as an attribute
of the generator, e.g., contribution.name.phase, where
‘contribution’ is this contribution and ‘name’ is passed
name.</dd>
<dt>parset  –  A SrRealParSet that holds the structural information.</dt>
<dd>This can be used to share the phase between multiple
BasePDFGenerators, and have the changes in one reflect in
another.</dd>
<dt>periodic – The structure should be treated as periodic.  If this is</dt>
<dd>True (default), then a PDFGenerator will be used to
calculate the PDF from the phase. Otherwise, a
DebyePDFGenerator will be used. Note that some structures
do not support periodicity, in which case this may be
ignored.</dd>
</dl>
<p>Returns the new phase (ParameterSet appropriate for what was passed in
stru.)</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.addStructure">
<code class="descname">addStructure</code><span class="sig-paren">(</span><em>name</em>, <em>stru</em>, <em>periodic=True</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.addStructure" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a phase that goes into the PDF calculation.</p>
<dl class="docutils">
<dt>name    –  A name to give the generator that will manage the PDF</dt>
<dd>calculation from the passed structure. The adapted
structure will be accessible via the name “phase” as an
attribute of the generator, e.g.
contribution.name.phase, where ‘contribution’ is this
contribution and ‘name’ is passed name.
(default), then the name will be set as “phase”.</dd>
<dt>stru    –  diffpy.structure.Structure, pyobjcryst.crystal.Crystal or</dt>
<dd>pyobjcryst.molecule.Molecule instance.  Default None.</dd>
<dt>periodic – The structure should be treated as periodic.  If this is</dt>
<dd>True (default), then a PDFGenerator will be used to
calculate the PDF from the phase. Otherwise, a
DebyePDFGenerator will be used. Note that some structures
do not support periodicity, in which case this may be
ignored.</dd>
</dl>
<p>Returns the new phase (ParameterSet appropriate for what was passed in
stru.)</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.getQmax">
<code class="descname">getQmax</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.getQmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the qmax value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.getQmin">
<code class="descname">getQmin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.getQmin" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the qmin value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.getScatteringType">
<code class="descname">getScatteringType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.getScatteringType" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the scattering type. See ‘setScatteringType’.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.loadData">
<code class="descname">loadData</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.loadData" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the data in various formats.</p>
<p>This uses the PDFParser to load the data and then passes it to the
build-in profile with loadParsedData.</p>
<dl class="docutils">
<dt>data    –  An open file-like object, name of a file that contains data</dt>
<dd>or a string containing the data.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.savetxt">
<code class="descname">savetxt</code><span class="sig-paren">(</span><em>fname</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.savetxt" title="Permalink to this definition">¶</a></dt>
<dd><p>Call numpy.savetxt with x, ycalc, y, dy</p>
<p>This calls on the built-in Profile.</p>
<p>Arguments are passed to numpy.savetxt.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.setCalculationRange">
<code class="descname">setCalculationRange</code><span class="sig-paren">(</span><em>xmin=None</em>, <em>xmax=None</em>, <em>dx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.setCalculationRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Set epsilon-inclusive calculation range.</p>
<p>Adhere to the observed <code class="docutils literal notranslate"><span class="pre">xobs</span></code> points when <code class="docutils literal notranslate"><span class="pre">dx</span></code> is the same
as in the data.  <code class="docutils literal notranslate"><span class="pre">xmin</span></code> and <code class="docutils literal notranslate"><span class="pre">xmax</span></code> are clipped at the bounds
of the observed data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xmin</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The minimum value of the independent variable.  Keep the
current minimum when not specified.  If specified as “obs”
reset to the minimum observed value.</li>
<li><strong>xmax</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The maximum value of the independent variable.  Keep the
current maximum when not specified.  If specified as “obs”
reset to the maximum observed value.</li>
<li><strong>dx</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em> or </em><em>&quot;obs&quot;</em><em>, </em><em>optional</em>) – The sample spacing in the independent variable.  When different
from the data, resample the <code class="docutils literal notranslate"><span class="pre">x</span></code> as anchored at <code class="docutils literal notranslate"><span class="pre">xmin</span></code>.</li>
<li><strong>that xmin is always inclusive</strong><strong> (</strong><strong>unless clipped</strong><strong>)</strong><strong> xmax is inclusive</strong> (<em>Note</em>) – </li>
<li><strong>it is within the bounds of the observed data.</strong> (<em>if</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#AttributeError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> – If there is no observed data.</li>
<li><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – When xmin &gt; xmax or if dx &lt;= 0.  Also if dx &gt; xmax - xmin.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.setQmax">
<code class="descname">setQmax</code><span class="sig-paren">(</span><em>qmax</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.setQmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the qmax value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.setQmin">
<code class="descname">setQmin</code><span class="sig-paren">(</span><em>qmin</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.setQmin" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the qmin value.</p>
</dd></dl>

<dl class="method">
<dt id="diffpy.srfit.pdf.PDFContribution.setScatteringType">
<code class="descname">setScatteringType</code><span class="sig-paren">(</span><em>type='X'</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFContribution.setScatteringType" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the scattering type.</p>
<p>type    –   “X” for x-ray or “N” for neutron</p>
<p>Raises ValueError if type is not “X” or “N”</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diffpy.srfit.pdf.PDFParser">
<em class="property">class </em><code class="descclassname">diffpy.srfit.pdf.</code><code class="descname">PDFParser</code><a class="headerlink" href="#diffpy.srfit.pdf.PDFParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="diffpy.srfit.fitbase.html#diffpy.srfit.fitbase.profileparser.ProfileParser" title="diffpy.srfit.fitbase.profileparser.ProfileParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">diffpy.srfit.fitbase.profileparser.ProfileParser</span></code></a></p>
<p>Class for holding a diffraction pattern.</p>
<p>Attributes</p>
<dl class="docutils">
<dt>_format     –  Name of the data format that this parses (string, default</dt>
<dd>“”). The format string is a unique identifier for the data
format handled by the parser.</dd>
<dt>_banks      –  The data from each bank. Each bank contains a (x, y, dx, dy)</dt>
<dd><p class="first">tuple:
x       –  A numpy array containing the independent</p>
<blockquote>
<div>variable read from the file.</div></blockquote>
<dl class="last docutils">
<dt>y       –  A numpy array containing the profile</dt>
<dd>from the file.</dd>
<dt>dx      –  A numpy array containing the uncertainty in x</dt>
<dd>read from the file. This is 0 if the uncertainty
cannot be read.</dd>
<dt>dy      –  A numpy array containing the uncertainty read</dt>
<dd>from the file. This is 0 if the uncertainty
cannot be read.</dd>
</dl>
</dd>
</dl>
<p>_x          –  Indpendent variable from the chosen bank
_y          –  Profile from the chosen bank
_dx         –  Uncertainty in independent variable from the chosen bank
_dy         –  Uncertainty in profile from the chosen bank
_meta       –  A dictionary containing metadata read from the file.</p>
<p>General Metadata</p>
<dl class="docutils">
<dt>filename    –  The name of the file from which data was parsed. This key</dt>
<dd>will not exist if data was not read from file.</dd>
</dl>
<p>nbanks      –  The number of banks parsed.
bank        –  The chosen bank number.</p>
<p>Metadata - These may appear in the metadata dictionary</p>
<p>stype       –  The scattering type (“X”, “N”)
qmin        –  Minimum scattering vector (float)
qmax        –  Maximum scattering vector (float)
qdamp       –  Resolution damping factor (float)
qbroad      –  Resolution broadening factor (float)
spdiameter  –  Nanoparticle diameter (float)
scale       –  Data scale (float)
temperature –  Temperature (float)
doping      –  Doping (float)</p>
<dl class="method">
<dt id="diffpy.srfit.pdf.PDFParser.parseString">
<code class="descname">parseString</code><span class="sig-paren">(</span><em>patstring</em><span class="sig-paren">)</span><a class="headerlink" href="#diffpy.srfit.pdf.PDFParser.parseString" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a string and set the _x, _y, _dx, _dy and _meta variables.</p>
<p>When _dx or _dy cannot be obtained in the data format it is set to 0.</p>
<p>This wipes out the currently loaded data and selected bank number.</p>
<p>Arguments
patstring   –  A string containing the pattern</p>
<p>Raises ParseError if the string cannot be parsed</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="sidebar-anchor"></a>
    

  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">diffpy.srfit.pdf package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.pdf.basepdfgenerator">diffpy.srfit.pdf.basepdfgenerator module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.pdf.characteristicfunctions">diffpy.srfit.pdf.characteristicfunctions module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.pdf.debyepdfgenerator">diffpy.srfit.pdf.debyepdfgenerator module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.pdf.pdfcontribution">diffpy.srfit.pdf.pdfcontribution module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.pdf.pdfgenerator">diffpy.srfit.pdf.pdfgenerator module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.pdf.pdfparser">diffpy.srfit.pdf.pdfparser module</a></li>
<li><a class="reference internal" href="#module-diffpy.srfit.pdf">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="diffpy.srfit.interface.html"
                        title="previous chapter">diffpy.srfit.interface package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="diffpy.srfit.sas.html"
                        title="next chapter">diffpy.srfit.sas package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/diffpy.srfit.pdf.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="diffpy.srfit.sas.html" title="diffpy.srfit.sas package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="diffpy.srfit.interface.html" title="diffpy.srfit.interface package"
             accesskey="P">previous</a> |</li>
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Brookhaven National Laboratory.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>